import{u as e,r as t,C as a,o as r,j as s,k as o,q as n,b as l,c as d,f as i,t as u,n as c,B as g,e as p}from"./index-BChQAjBg.js";import{C as x}from"./CouponsAPI-B3DH21Q0.js";import{_ as y}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-CiMPynWi.js";import{_ as f}from"./AdminLayout-BDbNDvIA.js";import{_ as b}from"./ComponentCard.vue_vue_type_script_setup_true_lang-CxALZE3h.js";import"./helpers-BbRepCn0.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";const v={class:"space-y-5 sm:space-y-6"},m={key:0,class:"flex justify-center items-center py-12"},k={key:1,class:"max-w-4xl"},w={class:"bg-gradient-to-r from-brand-50 to-brand-100 dark:from-brand-500/10 dark:to-brand-500/20 rounded-lg p-6 mb-6"},h={class:"flex items-center justify-between"},C={class:"flex items-center gap-4"},_={class:"w-16 h-16 bg-white dark:bg-gray-800 rounded-full flex items-center justify-center shadow-lg"},j={class:"text-2xl font-bold text-brand-600 dark:text-brand-400"},D={class:"text-2xl font-bold text-gray-800 dark:text-white"},A={class:"text-gray-600 dark:text-gray-400"},E={class:"text-right"},L={class:"text-sm text-gray-500 dark:text-gray-400 mt-2"},B={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},I={class:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700"},S={class:"space-y-3"},T={class:"flex justify-between"},U={class:"font-medium text-gray-800 dark:text-white"},$={class:"flex justify-between"},M={class:"font-medium text-brand-600 dark:text-brand-400"},P={class:"flex justify-between"},V={class:"font-medium text-gray-800 dark:text-white"},q={class:"flex justify-between"},z={class:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700"},W={class:"space-y-3"},F={class:"flex justify-between"},G={class:"font-medium text-gray-800 dark:text-white"},H={class:"flex justify-between"},J={class:"font-medium text-gray-800 dark:text-white"},K={class:"flex justify-between"},N={class:"font-mono text-sm text-gray-500 dark:text-gray-400"},O={key:0,class:"mt-6 bg-yellow-50 dark:bg-yellow-500/10 border border-yellow-200 dark:border-yellow-500/20 rounded-lg p-4"},Q={key:2,class:"text-center py-12"},R={__name:"ViewCoupon",setup(R){const X=a(),Y=g(),Z=e(),ee=t(X.params.id),te=t(null),ae=t(!0),re=t("View Coupon"),se=e=>new Date(e).toLocaleDateString(),oe=e=>new Date(e).toLocaleString(),ne=e=>{const t=new Date;return new Date(e.expires)<t?"Expired":"Active"},le=e=>"Active"===ne(e)?"text-green-700 dark:text-green-400 font-medium":"text-red-700 dark:text-red-400 font-medium",de=e=>{const t=new Date,a=new Date(e.expires),r=Math.ceil((a-t)/864e5);return r>=0&&r<=7},ie=()=>{Y.push("/coupons")},ue=()=>{Y.push(`/coupons/edit/${ee.value}`)},ce=async()=>{if(confirm(`Are you sure you want to delete coupon ${te.value.code}?`))try{await x.deleteCoupon(ee.value,Z.token),Y.push("/coupons")}catch(e){console.error("Error deleting coupon:",e)}};return r(()=>{(async()=>{try{const e=await x.getCoupon(ee.value,Z.token);te.value=e.data.data.coupon,re.value=`Coupon: ${te.value.code}`}catch(e){console.error("Error loading coupon:",e)}finally{ae.value=!1}})()}),(e,t)=>(p(),s(f,null,{default:o(()=>[n(y,{pageTitle:re.value},null,8,["pageTitle"]),l("div",v,[n(b,{title:"Coupon Details"},{default:o(()=>{return[ae.value?(p(),d("div",m,[...t[0]||(t[0]=[l("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-500"},null,-1)])])):te.value?(p(),d("div",k,[l("div",w,[l("div",h,[l("div",C,[l("div",_,[l("span",j,u(te.value.code.charAt(0).toUpperCase()),1)]),l("div",null,[l("h2",D,u(te.value.code),1),l("p",A,u(te.value.discount)+"% Discount ",1)])]),l("div",E,[l("span",{class:c((e=te.value,"Active"===ne(e)?"bg-green-50 text-green-700 dark:bg-green-500/15 dark:text-green-500 rounded-full px-3 py-1 text-sm font-medium":"bg-red-50 text-red-700 dark:bg-red-500/15 dark:text-red-500 rounded-full px-3 py-1 text-sm font-medium"))},u(ne(te.value)),3),l("p",L," Expires: "+u(se(te.value.expires)),1)])])]),l("div",B,[l("div",I,[t[5]||(t[5]=l("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white mb-4"},"Coupon Details",-1)),l("div",S,[l("div",T,[t[1]||(t[1]=l("span",{class:"text-gray-600 dark:text-gray-400"},"Code:",-1)),l("span",U,u(te.value.code),1)]),l("div",$,[t[2]||(t[2]=l("span",{class:"text-gray-600 dark:text-gray-400"},"Discount:",-1)),l("span",M,u(te.value.discount)+"%",1)]),l("div",P,[t[3]||(t[3]=l("span",{class:"text-gray-600 dark:text-gray-400"},"Expiration Date:",-1)),l("span",V,u(se(te.value.expires)),1)]),l("div",q,[t[4]||(t[4]=l("span",{class:"text-gray-600 dark:text-gray-400"},"Status:",-1)),l("span",{class:c(le(te.value))},u(ne(te.value)),3)])])]),l("div",z,[t[9]||(t[9]=l("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white mb-4"},"Usage Information",-1)),l("div",W,[l("div",F,[t[6]||(t[6]=l("span",{class:"text-gray-600 dark:text-gray-400"},"Created:",-1)),l("span",G,u(oe(te.value.createdAt)),1)]),l("div",H,[t[7]||(t[7]=l("span",{class:"text-gray-600 dark:text-gray-400"},"Last Updated:",-1)),l("span",J,u(oe(te.value.updatedAt)),1)]),l("div",K,[t[8]||(t[8]=l("span",{class:"text-gray-600 dark:text-gray-400"},"Coupon ID:",-1)),l("span",N,u(te.value._id),1)])])])]),de(te.value)?(p(),d("div",O,[...t[10]||(t[10]=[l("div",{class:"flex items-center gap-3"},[l("svg",{class:"w-5 h-5 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})]),l("div",null,[l("p",{class:"text-yellow-800 dark:text-yellow-400 font-medium"},"Expiry Warning"),l("p",{class:"text-yellow-600 dark:text-yellow-500 text-sm"},"This coupon expires within the next 7 days.")])],-1)])])):i("",!0),l("div",{class:"mt-6 flex gap-4"},[l("button",{onClick:ue,class:"px-6 py-2 bg-brand-500 text-white rounded-lg hover:bg-brand-600 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2 transition-colors duration-200"}," Edit Coupon "),l("button",{onClick:ce,class:"px-6 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors duration-200"}," Delete Coupon "),l("button",{onClick:ie,class:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors duration-200"}," Back to List ")])])):(p(),d("div",Q,[t[11]||(t[11]=l("p",{class:"text-gray-500 dark:text-gray-400"},"Coupon not found",-1)),l("button",{onClick:ie,class:"mt-4 px-4 py-2 bg-brand-500 text-white rounded-lg hover:bg-brand-600 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2"}," Back to Coupons ")]))];var e}),_:1})])]),_:1}))}};export{R as default};
