import{d as e,r as t,o as a,j as r,k as s,q as l,b as n,c as o,t as i,n as d,B as u,e as c}from"./index-BChQAjBg.js";import{M as m}from"./MatchesAPI-BLuDWH57.js";import{_ as p}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-CiMPynWi.js";import{_ as y}from"./AdminLayout-BDbNDvIA.js";import{_ as g}from"./ComponentCard.vue_vue_type_script_setup_true_lang-CxALZE3h.js";import{D as h}from"./DataTable-D4TLCeTz.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./ErrorIcon-CRM2J8oG.js";const x={class:"space-y-5 sm:space-y-6"},b={key:0,class:"flex justify-center items-center py-12"},f={class:"block font-medium text-gray-800 text-sm dark:text-white/90"},k=e({__name:"Matches",setup(e){const k=u(),v=t("Matches"),_=t([]),w=t(!1),j=[{key:"id",title:"ID",type:"text"},{key:"date",title:"Date",type:"text"},{key:"startTime",title:"Start Time",type:"text"},{key:"endTime",title:"End Time",type:"text"},{key:"level",title:"Level",type:"text"},{key:"type",title:"Type",type:"text"},{key:"status",title:"Status",type:"status"},{key:"creator",title:"Creator",type:"custom"}],M=async()=>{w.value=!0;try{const e=await m.getOpenMatches({});_.value=e.data.data||e.data}catch(e){console.error("Error fetching matches:",e)}finally{w.value=!1}},T=e=>{const t={open:"bg-green-50 text-green-700 dark:bg-green-500/15 dark:text-green-500",full:"bg-red-50 text-red-700 dark:bg-red-500/15 dark:text-red-500",cancelled:"bg-gray-50 text-gray-700 dark:bg-gray-500/15 dark:text-gray-500",completed:"bg-blue-50 text-blue-700 dark:bg-blue-500/15 dark:text-blue-500"};return`rounded-full px-2 py-0.5 text-theme-xs font-medium ${t[e]||t.open}`},C=()=>{k.push("/matches/add")},A=e=>{k.push(`/matches/view/${e.id}`)},D=e=>{k.push(`/matches/edit/${e.id}`)},E=async e=>{if(confirm("Are you sure you want to delete this match?"))try{await m.deleteMatch(e.id),M()}catch(t){console.error("Error deleting match:",t),alert("Failed to delete match")}};return a(()=>{M()}),(e,t)=>(c(),r(y,null,{default:s(()=>[l(p,{pageTitle:v.value},null,8,["pageTitle"]),n("div",x,[l(g,{title:"Matches Management"},{default:s(()=>[n("div",{class:"mb-4 flex justify-between items-center"},[t[0]||(t[0]=n("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white"},"All Matches",-1)),n("button",{onClick:C,class:"px-4 py-2 bg-brand-500 text-white rounded-lg hover:bg-brand-600 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2"}," Create Match ")]),w.value?(c(),o("div",b,[...t[1]||(t[1]=[n("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-500"},null,-1)])])):(c(),r(h,{key:1,columns:j,data:_.value,showActions:!0,onView:A,onEdit:D,onDelete:E},{"column-status":s(({item:e})=>[n("span",{class:d(T(e.status))},i(e.status),3)]),"column-creator":s(({item:e})=>{var t;return[n("div",null,[n("span",f,i((null==(t=e.Creator)?void 0:t.name)||"Unknown"),1)])]}),_:1},8,["data"]))]),_:1})])]),_:1}))}});export{k as default};
