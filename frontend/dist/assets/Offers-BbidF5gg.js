import{d as e,r as t,o as a,j as s,k as r,q as l,b as o,c as i,t as n,B as f,e as u}from"./index-BChQAjBg.js";import{O as c}from"./OffersAPI-Hn1d8n1a.js";import{_ as d}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-CiMPynWi.js";import{_ as m}from"./AdminLayout-BDbNDvIA.js";import{_ as p}from"./ComponentCard.vue_vue_type_script_setup_true_lang-CxALZE3h.js";import{D as g}from"./DataTable-D4TLCeTz.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./ErrorIcon-CRM2J8oG.js";const y={class:"space-y-5 sm:space-y-6"},v={key:0,class:"flex justify-center items-center py-12"},_={class:"text-green-600 font-bold"},b={class:"w-16 h-10 overflow-hidden rounded bg-gray-200 dark:bg-gray-700"},x=["src"],h={key:1,class:"flex items-center justify-center w-full h-full text-xs text-gray-500"},j=e({__name:"Offers",setup(e){const j=f(),k=t("Offers"),w=t([]),O=t(!1),D=[{key:"id",title:"ID",type:"text"},{key:"image",title:"Image",type:"custom"},{key:"title",title:"Title",type:"text"},{key:"discountPercentage",title:"Discount",type:"custom"},{key:"validUntil",title:"Valid Until",type:"custom"}],A=async()=>{O.value=!0;try{const e=await c.getAllOffers({});w.value=e.data.data||e.data}catch(e){console.error("Error fetching offers:",e)}finally{O.value=!1}},I=()=>{j.push("/offers/add")},P=async e=>{if(confirm("Are you sure you want to delete this offer?"))try{await c.deleteOffer(e.id),A()}catch(t){console.error("Error deleting offer:",t),alert("Failed to delete offer")}};return a(()=>{A()}),(e,t)=>(u(),s(m,null,{default:r(()=>[l(d,{pageTitle:k.value},null,8,["pageTitle"]),o("div",y,[l(p,{title:"Offers Management"},{default:r(()=>[o("div",{class:"mb-4 flex justify-between items-center"},[t[0]||(t[0]=o("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white"},"All Offers",-1)),o("button",{onClick:I,class:"px-4 py-2 bg-brand-500 text-white rounded-lg hover:bg-brand-600 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2"}," Create Offer ")]),O.value?(u(),i("div",v,[...t[1]||(t[1]=[o("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-500"},null,-1)])])):(u(),s(g,{key:1,columns:D,data:w.value,showActions:!0,onDelete:P},{"column-discountPercentage":r(({item:e})=>[o("span",_,n(e.discountPercentage)+"% ",1)]),"column-validUntil":r(({item:e})=>[o("span",null,n(new Date(e.validUntil).toLocaleDateString()),1)]),"column-image":r(({item:e})=>[o("div",b,[e.image?(u(),i("img",{key:0,src:e.image,alt:"Offer",class:"w-full h-full object-cover"},null,8,x)):(u(),i("span",h,"No Img"))])]),_:1},8,["data"]))]),_:1})])]),_:1}))}});export{j as default};
