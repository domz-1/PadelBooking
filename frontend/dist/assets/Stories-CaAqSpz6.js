import{d as e,r as t,o as s,j as a,k as r,q as l,b as o,c as i,t as n,B as u,e as c}from"./index-BChQAjBg.js";import{S as d}from"./StoriesAPI-BypLS4I5.js";import{_ as p}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-CiMPynWi.js";import{_ as m}from"./AdminLayout-BDbNDvIA.js";import{_ as y}from"./ComponentCard.vue_vue_type_script_setup_true_lang-CxALZE3h.js";import{D as f}from"./DataTable-D4TLCeTz.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./ErrorIcon-CRM2J8oG.js";const g={class:"space-y-5 sm:space-y-6"},_={key:0,class:"flex justify-center items-center py-12"},v={class:"w-16 h-16 overflow-hidden rounded bg-gray-200 dark:bg-gray-700"},b=["src"],x=["src"],h=e({__name:"Stories",setup(e){const h=u(),j=t("Stories"),k=t([]),w=t(!1),A=[{key:"id",title:"ID",type:"text"},{key:"mediaUrl",title:"Media",type:"custom"},{key:"type",title:"Type",type:"text"},{key:"expiresAt",title:"Expires At",type:"custom"}],S=()=>{h.push("/stories/add")};return s(()=>{(async()=>{w.value=!0;try{const e=await d.getAllStories({});k.value=e.data.data||e.data}catch(e){console.error("Error fetching stories:",e)}finally{w.value=!1}})()}),(e,t)=>(c(),a(m,null,{default:r(()=>[l(p,{pageTitle:j.value},null,8,["pageTitle"]),o("div",g,[l(y,{title:"Stories Management"},{default:r(()=>[o("div",{class:"mb-4 flex justify-between items-center"},[t[0]||(t[0]=o("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white"},"All Stories",-1)),o("button",{onClick:S,class:"px-4 py-2 bg-brand-500 text-white rounded-lg hover:bg-brand-600 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2"}," Add Story ")]),w.value?(c(),i("div",_,[...t[1]||(t[1]=[o("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-500"},null,-1)])])):(c(),a(f,{key:1,columns:A,data:k.value,showActions:!1},{"column-mediaUrl":r(({item:e})=>[o("div",v,["image"===e.type?(c(),i("img",{key:0,src:e.mediaUrl,alt:"Story",class:"w-full h-full object-cover"},null,8,b)):(c(),i("video",{key:1,src:e.mediaUrl,class:"w-full h-full object-cover"},null,8,x))])]),"column-expiresAt":r(({item:e})=>[o("span",null,n(new Date(e.expiresAt).toLocaleString()),1)]),_:1},8,["data"]))]),_:1})])]),_:1}))}});export{h as default};
