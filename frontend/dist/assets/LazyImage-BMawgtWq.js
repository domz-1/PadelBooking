import{d as e,r as a,z as l,o as r,c as s,f as t,n as o,b as i,t as d,y as u,a as c,e as g}from"./index-BChQAjBg.js";import{_ as n}from"./_plugin-vue_export-helper-BCo6x5W8.js";const m=["src","alt"],v={class:"text-xs text-gray-500 mt-2"},h=n(e({__name:"LazyImage",props:{imageId:{},alt:{default:"Image"},width:{default:"100%"},height:{default:"auto"},imageClass:{default:"w-full h-full object-cover"},loadingClass:{default:"flex items-center justify-center w-full h-full bg-gray-100 dark:bg-gray-800"},errorClass:{default:"flex flex-col items-center justify-center w-full h-full bg-gray-100 dark:bg-gray-800"},placeholder:{default:""},errorMessage:{default:"Failed to load image"}},setup(e){const n=e,h=a(""),f=a(!1),p=a(!1),y=async()=>{if(n.imageId){f.value=!0,p.value=!1;try{const e=(await c.get(`/images/image/${n.imageId}`,{responseType:"blob"})).data;h.value=URL.createObjectURL(e)}catch(e){console.error("Failed to load image:",e),p.value=!0,n.placeholder&&(h.value=n.placeholder)}finally{f.value=!1}}else n.placeholder&&(h.value=n.placeholder)},b=()=>{p.value=!0,n.placeholder&&(h.value=n.placeholder)},w=()=>{f.value=!1,p.value=!1};return l(()=>n.imageId,()=>{h.value&&h.value.startsWith("blob:")&&URL.revokeObjectURL(h.value),y()},{immediate:!0}),r(()=>{y()}),(a,l)=>(g(),s("div",{class:"lazy-image-container",style:u({width:e.width,height:e.height})},[h.value?(g(),s("img",{key:0,src:h.value,alt:e.alt,class:o(e.imageClass),onError:b,onLoad:w},null,42,m)):f.value?(g(),s("div",{key:1,class:o(["lazy-image-loading",e.loadingClass])},[...l[0]||(l[0]=[i("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-400"},null,-1)])],2)):p.value?(g(),s("div",{key:2,class:o(["lazy-image-error",e.errorClass])},[l[1]||(l[1]=i("svg",{class:"w-12 h-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),i("span",v,d(e.errorMessage),1)],2)):t("",!0)],4))}}),[["__scopeId","data-v-3135770d"]]);export{h as L};
