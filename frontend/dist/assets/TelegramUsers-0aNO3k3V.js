import{a as e,d as t,r as a,H as r,c as s,b as l,G as d,w as o,A as n,I as i,l as c,e as u,o as g,t as m,m as x,f as b,L as y,F as p,i as v,n as f,p as k,z as h,j as w,k as A,q as C,E as U}from"./index-BChQAjBg.js";import{_ as N}from"./AdminLayout-BDbNDvIA.js";import{_ as I}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-CiMPynWi.js";import{_ as M}from"./ComponentCard.vue_vue_type_script_setup_true_lang-CxALZE3h.js";import{D as j}from"./DataTable-D4TLCeTz.js";import{_}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./ErrorIcon-CRM2J8oG.js";const T=async(t={})=>e.get("/telegram-users",{params:t}),D=async()=>e.get("/telegram-users/activated"),L=async()=>e.get("/telegram-users/stats"),z=async t=>e.post("/telegram-users",t),S=async(t,a)=>{const r={};void 0!==a.name&&(r.name=a.name),void 0!==a.chatId&&(r.chatId=a.chatId),void 0!==a.isActivated&&(r.isActivated=a.isActivated),void 0!==a.username&&(r.username=a.username),void 0!==a.firstName&&(r.firstName=a.firstName),void 0!==a.lastName&&(r.lastName=a.lastName),void 0!==a.languageCode&&(r.languageCode=a.languageCode),void 0!==a.notes&&(r.notes=a.notes),console.log("ðŸ”§ API: Clean data being sent to server:",r),console.log("ðŸ”§ API: Data keys:",Object.keys(r)),console.log("ðŸ”§ API: Request URL:",`/telegram-users/${t}`);return await e.patch(`/telegram-users/${t}`,r)},V=async t=>e.patch(`/telegram-users/${t}/toggle`),E=async t=>e.patch("/telegram-users/bulk-update",t),B=async t=>e.delete(`/telegram-users/${t}`),P=async t=>e.post("/telegram-users/send-test-message",t),$={class:"fixed inset-0 z-50 overflow-y-auto"},F={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},H={class:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl dark:bg-gray-800 relative z-10"},R={class:"flex items-center justify-between mb-4"},q={class:"mt-1 relative"},O={class:"flex items-center"},G={class:"flex justify-end space-x-3 pt-4"},W=["disabled"],Q={key:0,class:"flex items-center"},Y={key:1},J=t({__name:"AddTelegramUserModal",emits:["close","user-added"],setup(e,{emit:t}){const g=t,m=a(!1),x=r({name:"",chatId:"",isActivated:!0,username:"",firstName:"",lastName:"",languageCode:"en",notes:""}),b=()=>{x.username&&!x.name&&(x.name=x.username.charAt(0).toUpperCase()+x.username.slice(1))},y=async()=>{var e,t,a,r,s,l,d,o;try{m.value=!0,!x.name.trim()&&(null==(e=x.username)?void 0:e.trim())&&(x.name=x.username.charAt(0).toUpperCase()+x.username.slice(1));const d={name:x.name.trim()||(null==(t=x.username)?void 0:t.trim())||"Unknown User",chatId:x.chatId.trim(),isActivated:x.isActivated,languageCode:"en"};(null==(a=x.username)?void 0:a.trim())&&(d.username=x.username.trim()),(null==(r=x.firstName)?void 0:r.trim())&&(d.firstName=x.firstName.trim()),(null==(s=x.lastName)?void 0:s.trim())&&(d.lastName=x.lastName.trim()),(null==(l=x.notes)?void 0:l.trim())&&(d.notes=x.notes.trim()),await z(d),g("user-added")}catch(n){console.error("Error creating user:",n),alert((null==(o=null==(d=n.response)?void 0:d.data)?void 0:o.message)||"Failed to create user")}finally{m.value=!1}};return(e,t)=>(u(),s("div",$,[l("div",F,[l("div",{class:"fixed inset-0 transition-opacity bg-gray-500/50 bg-opacity-50",onClick:t[0]||(t[0]=t=>e.$emit("close"))}),l("div",H,[l("div",R,[t[11]||(t[11]=l("h3",{class:"text-lg font-medium leading-6 text-gray-900 dark:text-white"}," Add Telegram User ",-1)),l("button",{onClick:t[1]||(t[1]=t=>e.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...t[10]||(t[10]=[l("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),l("form",{onSubmit:d(y,["prevent"]),class:"space-y-4"},[l("div",null,[t[13]||(t[13]=l("label",{for:"username",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Username * ",-1)),l("div",q,[t[12]||(t[12]=l("span",{class:"absolute left-3 top-2 text-gray-400"},"@",-1)),o(l("input",{id:"username","onUpdate:modelValue":t[2]||(t[2]=e=>x.username=e),type:"text",required:"",onInput:b,class:"block w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-brand-500 focus:border-brand-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"username"},null,544),[[n,x.username]])]),t[14]||(t[14]=l("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," Telegram username (without @) ",-1))]),l("div",null,[t[15]||(t[15]=l("label",{for:"chatId",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Chat ID * ",-1)),o(l("input",{id:"chatId","onUpdate:modelValue":t[3]||(t[3]=e=>x.chatId=e),type:"text",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-brand-500 focus:border-brand-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono",placeholder:"123456789"},null,512),[[n,x.chatId]]),t[16]||(t[16]=l("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," Telegram chat ID (numeric) - Required for sending messages ",-1))]),l("div",null,[t[17]||(t[17]=l("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Display Name ",-1)),o(l("input",{id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>x.name=e),type:"text",class:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-brand-500 focus:border-brand-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Auto-generated from username"},null,512),[[n,x.name]]),t[18]||(t[18]=l("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," Auto-filled from username, you can customize it ",-1))]),l("div",null,[t[19]||(t[19]=l("label",{for:"firstName",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," First Name ",-1)),o(l("input",{id:"firstName","onUpdate:modelValue":t[5]||(t[5]=e=>x.firstName=e),type:"text",class:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-brand-500 focus:border-brand-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"First name"},null,512),[[n,x.firstName]])]),l("div",null,[t[20]||(t[20]=l("label",{for:"lastName",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Last Name ",-1)),o(l("input",{id:"lastName","onUpdate:modelValue":t[6]||(t[6]=e=>x.lastName=e),type:"text",class:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-brand-500 focus:border-brand-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Last name"},null,512),[[n,x.lastName]])]),l("div",O,[o(l("input",{id:"isActivated","onUpdate:modelValue":t[7]||(t[7]=e=>x.isActivated=e),type:"checkbox",class:"h-4 w-4 text-brand-600 focus:ring-brand-500 border-gray-300 rounded"},null,512),[[i,x.isActivated]]),t[21]||(t[21]=l("label",{for:"isActivated",class:"ml-2 block text-sm text-gray-700 dark:text-gray-300"}," Activate user for notifications ",-1))]),l("div",null,[t[22]||(t[22]=l("label",{for:"notes",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Notes ",-1)),o(l("textarea",{id:"notes","onUpdate:modelValue":t[8]||(t[8]=e=>x.notes=e),rows:"3",class:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-brand-500 focus:border-brand-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Optional notes about this user..."},null,512),[[n,x.notes]])]),l("div",G,[l("button",{type:"button",onClick:t[9]||(t[9]=t=>e.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-600"}," Cancel "),l("button",{type:"submit",disabled:m.value||!x.username||!x.chatId,class:"px-4 py-2 text-sm font-medium text-white bg-brand-600 border border-transparent rounded-md shadow-sm hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500 disabled:opacity-50 disabled:cursor-not-allowed"},[m.value?(u(),s("span",Q,[...t[23]||(t[23]=[l("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),c(" Creating... ",-1)])])):(u(),s("span",Y,"Create User"))],8,W)])],32)])])]))}}),K={class:"fixed inset-0 z-50 overflow-y-auto"},X={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},Z={class:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl dark:bg-gray-800 relative z-10"},ee={class:"flex items-center justify-between mb-4"},te={class:"mt-1 relative"},ae={class:"flex items-center"},re={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-2"},se={class:"grid grid-cols-2 gap-4 text-sm"},le={class:"ml-2 font-medium text-gray-900 dark:text-white"},de={class:"ml-2 font-medium text-gray-900 dark:text-white"},oe={class:"ml-2 font-medium text-gray-900 dark:text-white"},ne={class:"ml-2 font-medium text-gray-900 dark:text-white"},ie={class:"flex justify-end space-x-3 pt-4"},ce=["disabled"],ue={key:0,class:"flex items-center"},ge={key:1},me=t({__name:"EditTelegramUserModal",props:{user:{}},emits:["close","user-updated"],setup(e,{emit:t}){const x=e,b=t,y=a(!1),p=r({name:"",chatId:"",isActivated:!0,username:"",firstName:"",lastName:"",languageCode:"en",notes:""}),v=async()=>{var e,t,a,r,s,l,d,o;try{y.value=!0;const d={};(null==(e=p.name)?void 0:e.trim())&&(d.name=p.name.trim()),(null==(t=p.chatId)?void 0:t.trim())&&(d.chatId=p.chatId.trim()),"boolean"==typeof p.isActivated&&(d.isActivated=p.isActivated),(null==(a=p.username)?void 0:a.trim())&&(d.username=p.username.trim()),(null==(r=p.firstName)?void 0:r.trim())&&(d.firstName=p.firstName.trim()),(null==(s=p.lastName)?void 0:s.trim())&&(d.lastName=p.lastName.trim()),(null==(l=p.notes)?void 0:l.trim())&&(d.notes=p.notes.trim());const o={};d.name&&(o.name=d.name),d.chatId&&(o.chatId=d.chatId),"boolean"==typeof d.isActivated&&(o.isActivated=d.isActivated),d.username&&(o.username=d.username),d.firstName&&(o.firstName=d.firstName),d.lastName&&(o.lastName=d.lastName),d.notes&&(o.notes=d.notes),console.log("ðŸ“ Clean form data being sent:",o),console.log("ðŸ“ Original form data keys:",Object.keys(d)),await S(x.user._id,o),b("user-updated")}catch(n){console.error("Error updating user:",n),alert((null==(o=null==(d=n.response)?void 0:d.data)?void 0:o.message)||"Failed to update user")}finally{y.value=!1}},f=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return g(()=>{p.name=x.user.name,p.chatId=x.user.chatId,p.isActivated=x.user.isActivated,p.username=x.user.username||"",p.firstName=x.user.firstName||"",p.lastName=x.user.lastName||"",p.languageCode=x.user.languageCode||"en",p.notes=x.user.notes||"",console.log("ðŸ“‹ Form initialized with user data (no ID):",{name:p.name,chatId:p.chatId,isActivated:p.isActivated,username:p.username})}),(t,a)=>(u(),s("div",K,[l("div",X,[l("div",{class:"fixed inset-0 transition-opacity bg-gray-500/50 bg-opacity-50",onClick:a[0]||(a[0]=e=>t.$emit("close"))}),l("div",Z,[l("div",ee,[a[11]||(a[11]=l("h3",{class:"text-lg font-medium leading-6 text-gray-900 dark:text-white"}," Edit Telegram User ",-1)),l("button",{onClick:a[1]||(a[1]=e=>t.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...a[10]||(a[10]=[l("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),l("form",{onSubmit:d(v,["prevent"]),class:"space-y-4"},[l("div",null,[a[12]||(a[12]=l("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Name * ",-1)),o(l("input",{id:"name","onUpdate:modelValue":a[2]||(a[2]=e=>p.name=e),type:"text",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-brand-500 focus:border-brand-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Enter user's display name"},null,512),[[n,p.name]])]),l("div",null,[a[13]||(a[13]=l("label",{for:"chatId",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Chat ID * ",-1)),o(l("input",{id:"chatId","onUpdate:modelValue":a[3]||(a[3]=e=>p.chatId=e),type:"text",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-brand-500 focus:border-brand-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono",placeholder:"123456789"},null,512),[[n,p.chatId]]),a[14]||(a[14]=l("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," Telegram chat ID (numeric) ",-1))]),l("div",null,[a[16]||(a[16]=l("label",{for:"username",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Username ",-1)),l("div",te,[a[15]||(a[15]=l("span",{class:"absolute left-3 top-2 text-gray-400"},"@",-1)),o(l("input",{id:"username","onUpdate:modelValue":a[4]||(a[4]=e=>p.username=e),type:"text",class:"block w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-brand-500 focus:border-brand-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"username"},null,512),[[n,p.username]])])]),l("div",null,[a[17]||(a[17]=l("label",{for:"firstName",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," First Name ",-1)),o(l("input",{id:"firstName","onUpdate:modelValue":a[5]||(a[5]=e=>p.firstName=e),type:"text",class:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-brand-500 focus:border-brand-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"First name"},null,512),[[n,p.firstName]])]),l("div",null,[a[18]||(a[18]=l("label",{for:"lastName",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Last Name ",-1)),o(l("input",{id:"lastName","onUpdate:modelValue":a[6]||(a[6]=e=>p.lastName=e),type:"text",class:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-brand-500 focus:border-brand-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Last name"},null,512),[[n,p.lastName]])]),l("div",ae,[o(l("input",{id:"isActivated","onUpdate:modelValue":a[7]||(a[7]=e=>p.isActivated=e),type:"checkbox",class:"h-4 w-4 text-brand-600 focus:ring-brand-500 border-gray-300 rounded"},null,512),[[i,p.isActivated]]),a[19]||(a[19]=l("label",{for:"isActivated",class:"ml-2 block text-sm text-gray-700 dark:text-gray-300"}," Activate user for notifications ",-1))]),l("div",null,[a[20]||(a[20]=l("label",{for:"notes",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Notes ",-1)),o(l("textarea",{id:"notes","onUpdate:modelValue":a[8]||(a[8]=e=>p.notes=e),rows:"3",class:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-brand-500 focus:border-brand-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Optional notes about this user..."},null,512),[[n,p.notes]])]),l("div",re,[a[25]||(a[25]=l("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"User Statistics",-1)),l("div",se,[l("div",null,[a[21]||(a[21]=l("span",{class:"text-gray-500 dark:text-gray-400"},"Messages Sent:",-1)),l("span",le,m(e.user.messageCount||0),1)]),l("div",null,[a[22]||(a[22]=l("span",{class:"text-gray-500 dark:text-gray-400"},"Last Message:",-1)),l("span",de,m(e.user.lastMessageAt?f(e.user.lastMessageAt):"Never"),1)]),l("div",null,[a[23]||(a[23]=l("span",{class:"text-gray-500 dark:text-gray-400"},"Created:",-1)),l("span",oe,m(f(e.user.createdAt)),1)]),l("div",null,[a[24]||(a[24]=l("span",{class:"text-gray-500 dark:text-gray-400"},"Updated:",-1)),l("span",ne,m(f(e.user.updatedAt)),1)])])]),l("div",ie,[l("button",{type:"button",onClick:a[9]||(a[9]=e=>t.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-600"}," Cancel "),l("button",{type:"submit",disabled:y.value||!p.name||!p.chatId,class:"px-4 py-2 text-sm font-medium text-white bg-brand-600 border border-transparent rounded-md shadow-sm hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500 disabled:opacity-50 disabled:cursor-not-allowed"},[y.value?(u(),s("span",ue,[...a[26]||(a[26]=[l("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),c(" Updating... ",-1)])])):(u(),s("span",ge,"Update User"))],8,ce)])],32)])])]))}}),xe={class:"fixed inset-0 z-50 overflow-y-auto"},be={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},ye={class:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl dark:bg-gray-800 relative z-10"},pe={class:"flex items-center justify-between mb-4"},ve={class:"space-y-2"},fe={class:"flex items-center"},ke={class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},he={class:"text-gray-500"},we={class:"flex items-center"},Ae={key:0,class:"space-y-2"},Ce={class:"max-h-40 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-md p-2 space-y-1"},Ue=["value"],Ne={class:"ml-3 flex items-center gap-2"},Ie={class:"w-6 h-6 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center"},Me={class:"text-xs font-medium text-white"},je={class:"text-sm font-medium text-gray-900 dark:text-white"},_e={key:0,class:"text-xs text-gray-500 dark:text-gray-400 ml-1"},Te={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},De={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4"},Le={class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded p-3 text-sm"},ze=["innerHTML"],Se={key:1,class:"text-gray-400 italic"},Ve={class:"flex justify-end space-x-3 pt-4"},Ee=["disabled"],Be={key:0,class:"flex items-center"},Pe={key:1},$e={key:0,class:"fixed inset-0 z-60 overflow-y-auto"},Fe={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},He={class:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl dark:bg-gray-800"},Re={class:"space-y-4"},qe={class:"grid grid-cols-2 gap-4"},Oe={class:"bg-green-50 dark:bg-green-500/20 rounded-lg p-3"},Ge={class:"text-green-900 dark:text-green-300 text-2xl font-bold"},We={class:"bg-red-50 dark:bg-red-500/20 rounded-lg p-3"},Qe={class:"text-red-900 dark:text-red-300 text-2xl font-bold"},Ye={key:0,class:"space-y-2"},Je={class:"max-h-40 overflow-y-auto space-y-1"},Ke={class:"font-mono text-gray-600 dark:text-gray-300"},Xe=t({__name:"TestMessageModal",emits:["close","message-sent"],setup(e,{emit:t}){const k=t,h=a(!1),w=a(!1),A=a([]),C=a(null),U=r({message:"ðŸ§ª This is a test message from Luxan E-commerce!\n\nâœ… If you received this, notifications are working correctly.",sendToAll:!0,userIds:[]}),N=x(()=>A.value.length),I=async()=>{var e,t;try{h.value=!0;const e={message:U.message.trim()};U.sendToAll?e.sendToAll=!0:e.userIds=U.userIds;const t=await P(e);C.value=t.data.data,w.value=!0,k("message-sent")}catch(a){console.error("Error sending test message:",a),alert((null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.message)||"Failed to send test message")}finally{h.value=!1}},M=()=>{w.value=!1,C.value=null,k("close")};return g(()=>{(async()=>{try{const e=await D();A.value=e.data.data}catch(e){console.error("Error fetching activated users:",e)}})()}),(e,t)=>{var a,r,g,x;return u(),s("div",xe,[l("div",be,[l("div",{class:"fixed inset-0 transition-opacity bg-gray-500/50 bg-opacity-50",onClick:t[0]||(t[0]=t=>e.$emit("close"))}),l("div",ye,[l("div",pe,[t[8]||(t[8]=l("h3",{class:"text-lg font-medium leading-6 text-gray-900 dark:text-white"}," ðŸ“¤ Send Test Message ",-1)),l("button",{onClick:t[1]||(t[1]=t=>e.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...t[7]||(t[7]=[l("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),l("form",{onSubmit:d(I,["prevent"]),class:"space-y-4"},[l("div",null,[t[9]||(t[9]=l("label",{for:"message",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Message Content * ",-1)),o(l("textarea",{id:"message","onUpdate:modelValue":t[2]||(t[2]=e=>U.message=e),rows:"6",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-brand-500 focus:border-brand-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Enter your test message here..."},null,512),[[n,U.message]]),t[10]||(t[10]=l("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," Supports HTML formatting: <b>bold</b>, <i>italic</i>, <code>code</code> ",-1))]),l("div",null,[t[13]||(t[13]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Recipients ",-1)),l("div",ve,[l("label",fe,[o(l("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>U.sendToAll=e),type:"radio",value:!0,name:"recipients",class:"h-4 w-4 text-brand-600 focus:ring-brand-500 border-gray-300"},null,512),[[y,U.sendToAll]]),l("span",ke,[t[11]||(t[11]=c(" Send to all activated users ",-1)),l("span",he,"("+m(N.value)+" users)",1)])]),l("label",we,[o(l("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>U.sendToAll=e),type:"radio",value:!1,name:"recipients",class:"h-4 w-4 text-brand-600 focus:ring-brand-500 border-gray-300"},null,512),[[y,U.sendToAll]]),t[12]||(t[12]=l("span",{class:"ml-2 text-sm text-gray-700 dark:text-gray-300"}," Send to specific users ",-1))])])]),U.sendToAll?b("",!0):(u(),s("div",Ae,[t[14]||(t[14]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Select Users ",-1)),l("div",Ce,[(u(!0),s(p,null,v(A.value,e=>{return u(),s("label",{key:e._id,class:"flex items-center p-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded cursor-pointer"},[o(l("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>U.userIds=e),type:"checkbox",value:e._id,class:"h-4 w-4 text-brand-600 focus:ring-brand-500 border-gray-300 rounded"},null,8,Ue),[[i,U.userIds]]),l("div",Ne,[l("div",Ie,[l("span",Me,m((a=e.name,a.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2))),1)]),l("div",null,[l("span",je,m(e.name),1),e.username?(u(),s("span",_e,"@"+m(e.username),1)):b("",!0)])])]);var a}),128))]),U.userIds.length>0?(u(),s("p",Te,m(U.userIds.length)+" user(s) selected ",1)):b("",!0)])),l("div",De,[t[15]||(t[15]=l("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Message Preview",-1)),l("div",Le,[U.message?(u(),s("div",{key:0,innerHTML:(x=U.message,x.replace(/\n/g,"<br>").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&lt;b&gt;(.*?)&lt;\/b&gt;/g,"<strong>$1</strong>").replace(/&lt;i&gt;(.*?)&lt;\/i&gt;/g,"<em>$1</em>").replace(/&lt;code&gt;(.*?)&lt;\/code&gt;/g,'<code class="bg-gray-100 dark:bg-gray-600 px-1 rounded">$1</code>')),class:"text-gray-900 dark:text-white"},null,8,ze)):(u(),s("div",Se,"Your message will appear here..."))])]),l("div",Ve,[l("button",{type:"button",onClick:t[6]||(t[6]=t=>e.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-600"}," Cancel "),l("button",{type:"submit",disabled:h.value||!U.message||!U.sendToAll&&0===U.userIds.length,class:"px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-md shadow-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed"},[h.value?(u(),s("span",Be,[...t[16]||(t[16]=[l("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),c(" Sending... ",-1)])])):(u(),s("span",Pe,"ðŸ“¤ Send Message"))],8,Ee)])],32),w.value?(u(),s("div",$e,[l("div",Fe,[l("div",{class:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:M}),l("div",He,[l("div",{class:"flex items-center justify-between mb-4"},[t[18]||(t[18]=l("h3",{class:"text-lg font-medium leading-6 text-gray-900 dark:text-white"}," ðŸ“Š Message Results ",-1)),l("button",{onClick:M,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...t[17]||(t[17]=[l("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),l("div",Re,[l("div",qe,[l("div",Oe,[t[19]||(t[19]=l("div",{class:"text-green-600 dark:text-green-400 text-sm font-medium"},"Successful",-1)),l("div",Ge,m((null==(a=C.value)?void 0:a.successCount)||0),1)]),l("div",We,[t[20]||(t[20]=l("div",{class:"text-red-600 dark:text-red-400 text-sm font-medium"},"Failed",-1)),l("div",Qe,m((null==(r=C.value)?void 0:r.failureCount)||0),1)])]),(null==(g=C.value)?void 0:g.results)&&C.value.results.length>0?(u(),s("div",Ye,[t[21]||(t[21]=l("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Detailed Results",-1)),l("div",Je,[(u(!0),s(p,null,v(C.value.results,e=>(u(),s("div",{key:e.chatId,class:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded text-sm"},[l("span",Ke,m(e.chatId),1),l("span",{class:f(["px-2 py-1 rounded text-xs font-medium",e.success?"bg-green-100 text-green-800 dark:bg-green-500/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-500/20 dark:text-red-400"])},m(e.success?"Success":"Failed"),3)]))),128))])])):b("",!0),l("div",{class:"flex justify-end"},[l("button",{onClick:M,class:"px-4 py-2 text-sm font-medium text-white bg-brand-600 border border-transparent rounded-md shadow-sm hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500"}," Close ")])])])])])):b("",!0)])])])}}}),Ze={class:"fixed inset-0 z-50 overflow-y-auto"},et={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},tt={class:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl dark:bg-gray-800 relative z-10"},at={class:"flex items-center justify-between mb-4"},rt={class:"space-y-4"},st={class:"bg-blue-50 dark:bg-blue-500/20 rounded-lg p-4"},lt={class:"text-sm font-medium text-blue-800 dark:text-blue-300 mb-2"},dt={class:"max-h-32 overflow-y-auto space-y-1"},ot={class:"w-5 h-5 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center"},nt={class:"text-xs font-medium text-white"},it={class:"text-blue-800 dark:text-blue-300"},ct={key:0,class:"text-blue-600 dark:text-blue-400 text-xs"},ut={class:"space-y-2"},gt={class:"flex items-center p-3 border border-gray-200 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700"},mt={class:"flex items-center p-3 border border-gray-200 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700"},xt={key:0,class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4"},bt={class:"space-y-1 text-sm"},yt={key:0},pt={class:"ml-2 font-medium text-green-600 dark:text-green-400"},vt={key:1},ft={class:"ml-2 font-medium text-gray-600 dark:text-gray-400"},kt={key:2},ht={class:"ml-2 font-medium text-red-600 dark:text-red-400"},wt={key:3},At={class:"ml-2 font-medium text-gray-600 dark:text-gray-400"},Ct={key:1,class:"bg-yellow-50 dark:bg-yellow-500/20 border border-yellow-200 dark:border-yellow-500/30 rounded-lg p-4"},Ut={class:"flex items-start gap-3"},Nt={class:"text-sm text-yellow-700 dark:text-yellow-400 mt-1"},It={class:"flex justify-end space-x-3 pt-4"},Mt=["disabled"],jt={key:0,class:"flex items-center"},_t={key:1},Tt=t({__name:"BulkUpdateModal",props:{selectedUsers:{}},emits:["close","bulk-updated"],setup(e,{emit:t}){const r=e,d=t,n=a(!1),i=a(""),h=a([]),w=x(()=>h.value.filter(e=>e.isActivated).length),A=x(()=>h.value.filter(e=>!e.isActivated).length),C=async()=>{var e,t;if(i.value)try{n.value=!0;const e={userIds:r.selectedUsers,isActivated:"activate"===i.value};await E(e),d("bulk-updated")}catch(a){console.error("Error updating users:",a),alert((null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.message)||"Failed to update users")}finally{n.value=!1}};return g(()=>{(async()=>{try{const e=await T({limit:1e3});h.value=e.data.data.data.filter(e=>r.selectedUsers.includes(e._id))}catch(e){console.error("Error fetching user details:",e)}})()}),(t,a)=>(u(),s("div",Ze,[l("div",et,[l("div",{class:"fixed inset-0 transition-opacity bg-gray-500/50 bg-opacity-50",onClick:a[0]||(a[0]=e=>t.$emit("close"))}),l("div",tt,[l("div",at,[a[6]||(a[6]=l("h3",{class:"text-lg font-medium leading-6 text-gray-900 dark:text-white"}," ðŸ“Š Bulk Update Users ",-1)),l("button",{onClick:a[1]||(a[1]=e=>t.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...a[5]||(a[5]=[l("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),l("div",rt,[l("div",st,[l("h4",lt," Selected Users ("+m(e.selectedUsers.length)+") ",1),l("div",dt,[(u(!0),s(p,null,v(h.value,e=>{return u(),s("div",{key:e._id,class:"flex items-center gap-2 text-sm"},[l("div",ot,[l("span",nt,m((t=e.name,t.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2))),1)]),l("span",it,m(e.name),1),e.username?(u(),s("span",ct,"@"+m(e.username),1)):b("",!0),l("span",{class:f(["ml-auto px-1.5 py-0.5 rounded text-xs font-medium",e.isActivated?"bg-green-100 text-green-700 dark:bg-green-500/20 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-500/20 dark:text-red-400"])},m(e.isActivated?"Active":"Inactive"),3)]);var t}),128))])]),l("div",null,[a[9]||(a[9]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Select Action ",-1)),l("div",ut,[l("label",gt,[o(l("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>i.value=e),type:"radio",value:"activate",class:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300"},null,512),[[y,i.value]]),a[7]||(a[7]=k('<div class="ml-3"><div class="flex items-center gap-2"><svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="text-sm font-medium text-gray-900 dark:text-white">Activate Users</span></div><p class="text-xs text-gray-500 dark:text-gray-400 mt-1"> Enable notifications for selected users </p></div>',1))]),l("label",mt,[o(l("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>i.value=e),type:"radio",value:"deactivate",class:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300"},null,512),[[y,i.value]]),a[8]||(a[8]=k('<div class="ml-3"><div class="flex items-center gap-2"><svg class="w-5 h-5 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="text-sm font-medium text-gray-900 dark:text-white">Deactivate Users</span></div><p class="text-xs text-gray-500 dark:text-gray-400 mt-1"> Disable notifications for selected users </p></div>',1))])])]),i.value?(u(),s("div",xt,[a[14]||(a[14]=l("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Impact Summary",-1)),l("div",bt,["activate"===i.value?(u(),s("div",yt,[a[10]||(a[10]=l("span",{class:"text-gray-600 dark:text-gray-400"},"Will activate:",-1)),l("span",pt,m(A.value)+" inactive user(s) ",1)])):b("",!0),"activate"===i.value?(u(),s("div",vt,[a[11]||(a[11]=l("span",{class:"text-gray-600 dark:text-gray-400"},"Already active:",-1)),l("span",ft,m(w.value)+" user(s) ",1)])):b("",!0),"deactivate"===i.value?(u(),s("div",kt,[a[12]||(a[12]=l("span",{class:"text-gray-600 dark:text-gray-400"},"Will deactivate:",-1)),l("span",ht,m(w.value)+" active user(s) ",1)])):b("",!0),"deactivate"===i.value?(u(),s("div",wt,[a[13]||(a[13]=l("span",{class:"text-gray-600 dark:text-gray-400"},"Already inactive:",-1)),l("span",At,m(A.value)+" user(s) ",1)])):b("",!0)])])):b("",!0),i.value?(u(),s("div",Ct,[l("div",Ut,[a[16]||(a[16]=l("svg",{class:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),l("div",null,[a[15]||(a[15]=l("h5",{class:"text-sm font-medium text-yellow-800 dark:text-yellow-300"},"Confirm Action",-1)),l("p",Nt," This will "+m(i.value)+" "+m(e.selectedUsers.length)+" selected user(s). "+m("activate"===i.value?"They will start receiving notifications.":"They will stop receiving notifications."),1)])])])):b("",!0),l("div",It,[l("button",{type:"button",onClick:a[4]||(a[4]=e=>t.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-600"}," Cancel "),l("button",{onClick:C,disabled:n.value||!i.value,class:f(["px-4 py-2 text-sm font-medium text-white border border-transparent rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","activate"===i.value?"bg-green-600 hover:bg-green-700 focus:ring-green-500":"bg-red-600 hover:bg-red-700 focus:ring-red-500"])},[n.value?(u(),s("span",jt,[...a[17]||(a[17]=[l("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),c(" Updating... ",-1)])])):(u(),s("span",_t,m("activate"===i.value?"âœ… Activate Users":"âŒ Deactivate Users"),1))],10,Mt)])])])])]))}}),Dt={class:"fixed inset-0 z-999999 overflow-y-auto"},Lt={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},zt={class:"inline-block w-full max-w-2xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl dark:bg-gray-800 relative z-10"},St={class:"flex items-center justify-between mb-6"},Vt={class:"space-y-6"},Et={class:"flex items-center gap-4 p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-500/10 dark:to-purple-500/10 rounded-lg"},Bt={class:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center"},Pt={class:"text-xl font-bold text-white"},$t={class:"flex-1"},Ft={class:"text-xl font-semibold text-gray-900 dark:text-white"},Ht={key:0,class:"text-gray-600 dark:text-gray-400"},Rt={class:"flex items-center gap-2 mt-2"},qt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ot={class:"space-y-4"},Gt={class:"space-y-3"},Wt={class:"mt-1 flex items-center gap-2"},Qt={class:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono text-gray-900 dark:text-white"},Yt={key:0},Jt={class:"mt-1 text-sm text-gray-900 dark:text-white"},Kt={key:1},Xt={class:"mt-1 text-sm text-gray-900 dark:text-white"},Zt={class:"space-y-4"},ea={class:"grid grid-cols-2 gap-4"},ta={class:"bg-blue-50 dark:bg-blue-500/20 rounded-lg p-3"},aa={class:"text-blue-900 dark:text-blue-300 text-2xl font-bold"},ra={class:"bg-purple-50 dark:bg-purple-500/20 rounded-lg p-3"},sa={class:"text-purple-900 dark:text-purple-300 text-2xl font-bold"},la={class:"space-y-3"},da={class:"mt-1 text-sm text-gray-900 dark:text-white"},oa={class:"mt-1 text-sm text-gray-900 dark:text-white"},na={class:"mt-1 text-sm text-gray-900 dark:text-white"},ia={key:0,class:"space-y-3"},ca={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4"},ua={class:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap"},ga={class:"space-y-3"},ma={class:"flex flex-wrap gap-3"},xa=["disabled"],ba=["disabled"],ya={class:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700"},pa=t({__name:"ViewTelegramUserModal",props:{user:{}},emits:["close","edit-user"],setup(e,{emit:t}){const r=e,d=a(!1),o=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),n=()=>{const e=new Date(r.user.createdAt),t=new Date,a=Math.abs(t.getTime()-e.getTime());return Math.ceil(a/864e5)},i=async()=>{var e,t;try{d.value=!0,await V(r.user._id),r.user.isActivated=!r.user.isActivated}catch(a){console.error("Error toggling activation:",a),alert((null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.message)||"Failed to toggle activation")}finally{d.value=!1}},g=async()=>{var e,t;try{d.value=!0,await P({message:"ðŸ§ª This is a test message from Luxan E-commerce!\n\nâœ… If you received this, notifications are working correctly.",userIds:[r.user._id]}),alert("Test message sent successfully!")}catch(a){console.error("Error sending test message:",a),alert((null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.message)||"Failed to send test message")}finally{d.value=!1}};return(t,a)=>{return u(),s("div",Dt,[l("div",Lt,[l("div",{class:"fixed inset-0 transition-opacity bg-gray-500/50 bg-opacity-50",onClick:a[0]||(a[0]=e=>t.$emit("close"))}),l("div",zt,[l("div",St,[a[7]||(a[7]=l("h3",{class:"text-lg font-medium leading-6 text-gray-900 dark:text-white"}," ðŸ‘¤ User Details ",-1)),l("button",{onClick:a[1]||(a[1]=e=>t.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...a[6]||(a[6]=[l("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),l("div",Vt,[l("div",Et,[l("div",Bt,[l("span",Pt,m((x=e.user.name,x.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2))),1)]),l("div",$t,[l("h4",Ft,m(e.user.name),1),e.user.username?(u(),s("p",Ht,"@"+m(e.user.username),1)):b("",!0),l("div",Rt,[l("span",{class:f(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",e.user.isActivated?"bg-green-100 text-green-800 dark:bg-green-500/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-500/20 dark:text-red-400"])},[l("span",{class:f(["w-1.5 h-1.5 rounded-full mr-1.5",e.user.isActivated?"bg-green-400":"bg-red-400"])},null,2),c(" "+m(e.user.isActivated?"Active":"Inactive"),1)],2)])]),l("button",{onClick:a[2]||(a[2]=a=>t.$emit("edit-user",e.user)),class:"px-4 py-2 text-sm font-medium text-white bg-brand-600 border border-transparent rounded-md shadow-sm hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500"}," âœï¸ Edit ")]),l("div",qt,[l("div",Ot,[a[12]||(a[12]=l("h5",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Basic Information",-1)),l("div",Gt,[l("div",null,[a[9]||(a[9]=l("label",{class:"block text-sm font-medium text-gray-500 dark:text-gray-400"},"Chat ID",-1)),l("div",Wt,[l("code",Qt,m(e.user.chatId),1),l("button",{onClick:a[3]||(a[3]=t=>(async e=>{try{await navigator.clipboard.writeText(e)}catch(t){console.error("Failed to copy to clipboard:",t)}})(e.user.chatId)),class:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:"Copy to clipboard"},[...a[8]||(a[8]=[l("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)])])])]),e.user.firstName||e.user.lastName?(u(),s("div",Yt,[a[10]||(a[10]=l("label",{class:"block text-sm font-medium text-gray-500 dark:text-gray-400"},"Full Name",-1)),l("p",Jt,m([e.user.firstName,e.user.lastName].filter(Boolean).join(" ")||"Not provided"),1)])):b("",!0),e.user.languageCode?(u(),s("div",Kt,[a[11]||(a[11]=l("label",{class:"block text-sm font-medium text-gray-500 dark:text-gray-400"},"Language",-1)),l("p",Xt,m((r=e.user.languageCode,{en:"English",ar:"Arabic",es:"Spanish",fr:"French",de:"German",ru:"Russian"}[r]||r.toUpperCase())),1)])):b("",!0)])]),l("div",Zt,[a[18]||(a[18]=l("h5",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Activity Statistics",-1)),l("div",ea,[l("div",ta,[a[13]||(a[13]=l("div",{class:"text-blue-600 dark:text-blue-400 text-sm font-medium"},"Messages Sent",-1)),l("div",aa,m(e.user.messageCount||0),1)]),l("div",ra,[a[14]||(a[14]=l("div",{class:"text-purple-600 dark:text-purple-400 text-sm font-medium"},"Days Active",-1)),l("div",sa,m(n()),1)])]),l("div",la,[l("div",null,[a[15]||(a[15]=l("label",{class:"block text-sm font-medium text-gray-500 dark:text-gray-400"},"Last Message",-1)),l("p",da,m(e.user.lastMessageAt?o(e.user.lastMessageAt):"Never"),1)]),l("div",null,[a[16]||(a[16]=l("label",{class:"block text-sm font-medium text-gray-500 dark:text-gray-400"},"Member Since",-1)),l("p",oa,m(o(e.user.createdAt)),1)]),l("div",null,[a[17]||(a[17]=l("label",{class:"block text-sm font-medium text-gray-500 dark:text-gray-400"},"Last Updated",-1)),l("p",na,m(o(e.user.updatedAt)),1)])])])]),e.user.notes?(u(),s("div",ia,[a[19]||(a[19]=l("h5",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Notes",-1)),l("div",ca,[l("p",ua,m(e.user.notes),1)])])):b("",!0),l("div",ga,[a[20]||(a[20]=l("h5",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Quick Actions",-1)),l("div",ma,[l("button",{onClick:i,disabled:d.value,class:f(["px-4 py-2 text-sm font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",e.user.isActivated?"text-red-700 bg-red-100 hover:bg-red-200 focus:ring-red-500 dark:bg-red-500/20 dark:text-red-400 dark:hover:bg-red-500/30":"text-green-700 bg-green-100 hover:bg-green-200 focus:ring-green-500 dark:bg-green-500/20 dark:text-green-400 dark:hover:bg-green-500/30"])},m(e.user.isActivated?"âŒ Deactivate":"âœ… Activate"),11,xa),l("button",{onClick:g,disabled:d.value||!e.user.isActivated,class:"px-4 py-2 text-sm font-medium text-purple-700 bg-purple-100 hover:bg-purple-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-purple-500/20 dark:text-purple-400 dark:hover:bg-purple-500/30 rounded-md shadow-sm"}," ðŸ“¤ Send Test Message ",8,ba),l("button",{onClick:a[4]||(a[4]=a=>t.$emit("edit-user",e.user)),class:"px-4 py-2 text-sm font-medium text-brand-700 bg-brand-100 hover:bg-brand-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500 dark:bg-brand-500/20 dark:text-brand-400 dark:hover:bg-brand-500/30 rounded-md shadow-sm"}," âœï¸ Edit User ")])]),l("div",ya,[l("button",{onClick:a[5]||(a[5]=e=>t.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-600"}," Close ")])])])])]);var r,x}}}),va={class:"space-y-5 sm:space-y-6"},fa={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},ka={class:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700"},ha={class:"flex items-center"},wa={class:"ml-4"},Aa={class:"text-2xl font-semibold text-gray-900 dark:text-white"},Ca={class:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700"},Ua={class:"flex items-center"},Na={class:"ml-4"},Ia={class:"text-2xl font-semibold text-gray-900 dark:text-white"},Ma={class:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700"},ja={class:"flex items-center"},_a={class:"ml-4"},Ta={class:"text-2xl font-semibold text-gray-900 dark:text-white"},Da={class:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700"},La={class:"flex items-center"},za={class:"ml-4"},Sa={class:"text-2xl font-semibold text-gray-900 dark:text-white"},Va={class:"mb-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},Ea={class:"flex flex-col sm:flex-row gap-2"},Ba={class:"mb-4 flex flex-col sm:flex-row gap-4"},Pa={class:"flex-1 relative"},$a={class:"mb-6 border-b border-gray-200 dark:border-gray-700"},Fa={class:"-mb-px flex space-x-8"},Ha={class:"ml-2 px-2 py-0.5 rounded-full text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"},Ra={class:"ml-2 px-2 py-0.5 rounded-full text-xs bg-green-100 dark:bg-green-500/20 text-green-600 dark:text-green-400"},qa={class:"ml-2 px-2 py-0.5 rounded-full text-xs bg-red-100 dark:bg-red-500/20 text-red-600 dark:text-red-400"},Oa={key:0,class:"flex justify-center items-center py-12"},Ga={class:"flex items-center gap-3"},Wa={class:"w-10 h-10 overflow-hidden rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center"},Qa={class:"text-sm font-medium text-white"},Ya={class:"block font-medium text-gray-800 text-sm dark:text-white/90"},Ja={key:0,class:"block text-gray-500 text-xs dark:text-gray-400"},Ka={class:"font-mono text-sm text-gray-600 dark:text-gray-300"},Xa=["onClick"],Za={class:"flex items-center gap-2"},er={class:"text-sm text-gray-600 dark:text-gray-300"},tr={class:"text-sm text-gray-600 dark:text-gray-300"},ar={class:"text-sm text-gray-600 dark:text-gray-300"},rr={key:2,class:"mt-6 flex justify-center"},sr={class:"flex items-center gap-2"},lr=["disabled"],dr={class:"px-3 py-2 text-sm text-gray-700 dark:text-gray-300"},or=["disabled"],nr=_(t({__name:"TelegramUsers",setup(e){const t=a("Telegram Users"),r=a([]),d=a({totalUsers:0,activatedUsers:0,deactivatedUsers:0,recentUsers:0,activationRate:"0"}),i=a(!1),y=a([]),p=a(null),v=a(""),k=a(""),_=a("all"),D=a({currentPage:1,totalPages:1,totalDocuments:0,limit:10}),z=a(!1),S=a(!1),E=a(!1),P=a(!1),$=a(!1),F=[{key:"name",title:"Name",type:"text"},{key:"chatId",title:"Chat ID",type:"text"},{key:"isActivated",title:"Status",type:"text"},{key:"lastMessageAt",title:"Last Message",type:"text"},{key:"createdAt",title:"Created",type:"text"}],H=x(()=>{let e=r.value;if("activated"===_.value?e=e.filter(e=>e.isActivated):"deactivated"===_.value&&(e=e.filter(e=>!e.isActivated)),""!==k.value){const t="true"===k.value;e=e.filter(e=>e.isActivated===t)}if(v.value){const t=v.value.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.chatId.toLowerCase().includes(t)||e.username&&e.username.toLowerCase().includes(t)||e.firstName&&e.firstName.toLowerCase().includes(t)||e.lastName&&e.lastName.toLowerCase().includes(t))}return e}),R=async()=>{try{i.value=!0;const e={page:D.value.currentPage,limit:D.value.limit,search:v.value||void 0,isActivated:""!==k.value?"true"===k.value:void 0},t=await T(e);console.log("ðŸ“Š Telegram Users API Response:",t.data),r.value=t.data.data.telegramUsers,console.log("ðŸ‘¥ Users loaded:",r.value.length),D.value={currentPage:t.data.data.pagination.currentPage,totalPages:t.data.data.pagination.totalPages,totalDocuments:t.data.data.pagination.totalDocuments,limit:D.value.limit}}catch(e){console.error("Error fetching users:",e)}finally{i.value=!1}},q=async()=>{try{const e=await L();d.value=e.data.data.statistics}catch(e){console.error("Error fetching stats:",e)}},O=e=>{$.value=!1,p.value=e,S.value=!0},G=e=>{e>=1&&e<=D.value.totalPages&&(D.value.currentPage=e,R())},W=()=>{z.value=!1,R(),q()},Q=()=>{S.value=!1,R(),q()},Y=()=>{E.value=!1},K=()=>{P.value=!1,y.value=[],R(),q()},X=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return h([v,k,_],()=>{D.value.currentPage=1,R()}),g(()=>{R(),q()}),(e,a)=>(u(),w(N,null,{default:A(()=>[C(I,{pageTitle:t.value},null,8,["pageTitle"]),l("div",va,[l("div",fa,[l("div",ka,[l("div",ha,[a[14]||(a[14]=l("div",{class:"p-2 bg-blue-100 dark:bg-blue-500/20 rounded-lg"},[l("svg",{class:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),l("div",wa,[a[13]||(a[13]=l("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Total Users",-1)),l("p",Aa,m(d.value.totalUsers||0),1)])])]),l("div",Ca,[l("div",Ua,[a[16]||(a[16]=l("div",{class:"p-2 bg-green-100 dark:bg-green-500/20 rounded-lg"},[l("svg",{class:"w-6 h-6 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),l("div",Na,[a[15]||(a[15]=l("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Activated Users",-1)),l("p",Ia,m(d.value.activatedUsers||0),1)])])]),l("div",Ma,[l("div",ja,[a[18]||(a[18]=l("div",{class:"p-2 bg-red-100 dark:bg-red-500/20 rounded-lg"},[l("svg",{class:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),l("div",_a,[a[17]||(a[17]=l("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Deactivated Users",-1)),l("p",Ta,m(d.value.deactivatedUsers||0),1)])])]),l("div",Da,[l("div",La,[a[20]||(a[20]=l("div",{class:"p-2 bg-purple-100 dark:bg-purple-500/20 rounded-lg"},[l("svg",{class:"w-6 h-6 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])],-1)),l("div",za,[a[19]||(a[19]=l("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Activation Rate",-1)),l("p",Sa,m(d.value.activationRate||"0")+"%",1)])])])]),C(M,{title:"Telegram Users Management"},{default:A(()=>[l("div",Va,[a[21]||(a[21]=l("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white"},"All Telegram Users",-1)),l("div",Ea,[l("button",{onClick:a[0]||(a[0]=e=>z.value=!0),class:"px-4 py-2 bg-brand-500 text-white rounded-lg hover:bg-brand-600 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2 transition-colors"}," âž• Add User ")])]),l("div",Ba,[l("div",Pa,[o(l("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>v.value=e),type:"text",placeholder:"Search by name, chat ID, username...",class:"w-full px-4 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-brand-500"},null,512),[[n,v.value]]),a[22]||(a[22]=l("svg",{class:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),o(l("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>k.value=e),class:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-brand-500"},[...a[23]||(a[23]=[l("option",{value:""},"All Status",-1),l("option",{value:"true"},"Activated",-1),l("option",{value:"false"},"Deactivated",-1)])],512),[[U,k.value]])]),l("div",$a,[l("nav",Fa,[l("button",{onClick:a[3]||(a[3]=e=>_.value="all"),class:f(["py-4 px-1 border-b-2 font-medium text-sm transition-colors","all"===_.value?"border-brand-500 text-brand-600 dark:text-brand-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[a[24]||(a[24]=c(" All Users ",-1)),l("span",Ha,m(D.value.totalDocuments),1)],2),l("button",{onClick:a[4]||(a[4]=e=>_.value="activated"),class:f(["py-4 px-1 border-b-2 font-medium text-sm transition-colors","activated"===_.value?"border-brand-500 text-brand-600 dark:text-brand-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[a[25]||(a[25]=c(" Activated ",-1)),l("span",Ra,m(d.value.activatedUsers||0),1)],2),l("button",{onClick:a[5]||(a[5]=e=>_.value="deactivated"),class:f(["py-4 px-1 border-b-2 font-medium text-sm transition-colors","deactivated"===_.value?"border-brand-500 text-brand-600 dark:text-brand-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[a[26]||(a[26]=c(" Deactivated ",-1)),l("span",qa,m(d.value.deactivatedUsers||0),1)],2)])]),i.value?(u(),s("div",Oa,[...a[27]||(a[27]=[l("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-500"},null,-1)])])):(u(),w(j,{key:1,columns:F,data:H.value,showActions:!0,onView:e=>{return t=e,p.value=t,void($.value=!0);var t},onEdit:e=>{return t=e,p.value=t,void(S.value=!0);var t},onDelete:e=>(async e=>{if(confirm(`Are you sure you want to delete user "${e.name}"?`))try{await B(e._id),await R(),await q()}catch(t){console.error("Error deleting user:",t)}})(e)},{"column-name":A(({item:e})=>{return[l("div",Ga,[l("div",Wa,[l("span",Qa,m((t=e.name,t.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2))),1)]),l("div",null,[l("span",Ya,m(e.name),1),e.username?(u(),s("span",Ja," @"+m(e.username),1)):b("",!0)])])];var t}),"column-chatId":A(({item:e})=>[l("div",Ka,m(e.chatId),1)]),"column-isActivated":A(({item:e})=>[l("button",{onClick:t=>(async e=>{try{await V(e._id),e.isActivated=!e.isActivated,await q()}catch(t){console.error("Error toggling user activation:",t)}})(e),class:f(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium transition-colors",e.isActivated?"bg-green-100 text-green-800 dark:bg-green-500/20 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-500/30":"bg-red-100 text-red-800 dark:bg-red-500/20 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-500/30"])},[l("span",{class:f(["w-1.5 h-1.5 rounded-full mr-1.5",e.isActivated?"bg-green-400":"bg-red-400"])},null,2),c(" "+m(e.isActivated?"Active":"Inactive"),1)],10,Xa)]),"column-messageCount":A(({item:e})=>[l("div",Za,[l("span",er,m(e.messageCount||0),1),a[28]||(a[28]=l("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1))])]),"column-lastMessageAt":A(({item:e})=>[l("div",tr,m(e.lastMessageAt?X(e.lastMessageAt):"Never"),1)]),"column-createdAt":A(({item:e})=>[l("div",ar,m(X(e.createdAt)),1)]),_:1},8,["data","onView","onEdit","onDelete"])),D.value.totalPages>1?(u(),s("div",rr,[l("nav",sr,[l("button",{onClick:a[6]||(a[6]=e=>G(D.value.currentPage-1)),disabled:D.value.currentPage<=1,class:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700"}," Previous ",8,lr),l("span",dr," Page "+m(D.value.currentPage)+" of "+m(D.value.totalPages),1),l("button",{onClick:a[7]||(a[7]=e=>G(D.value.currentPage+1)),disabled:D.value.currentPage>=D.value.totalPages,class:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700"}," Next ",8,or)])])):b("",!0)]),_:1})]),z.value?(u(),w(J,{key:0,onClose:a[8]||(a[8]=e=>z.value=!1),onUserAdded:W})):b("",!0),S.value&&p.value?(u(),w(me,{key:1,user:p.value,onClose:a[9]||(a[9]=e=>S.value=!1),onUserUpdated:Q},null,8,["user"])):b("",!0),E.value?(u(),w(Xe,{key:2,onClose:a[10]||(a[10]=e=>E.value=!1),onMessageSent:Y})):b("",!0),P.value?(u(),w(Tt,{key:3,selectedUsers:y.value,onClose:a[11]||(a[11]=e=>P.value=!1),onBulkUpdated:K},null,8,["selectedUsers"])):b("",!0),$.value&&p.value?(u(),w(pa,{key:4,user:p.value,onClose:a[12]||(a[12]=e=>$.value=!1),onEditUser:O},null,8,["user"])):b("",!0)]),_:1}))}}),[["__scopeId","data-v-c5180cf7"]]);export{nr as default};
