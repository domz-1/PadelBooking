import{d as e,m as a,C as t,r as s,o as i,j as l,k as r,B as o,q as c,b as p,c as u,e as n}from"./index-BChQAjBg.js";import{C as d}from"./CoachesAPI-BJ-v_NhS.js";import{_ as m}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-CiMPynWi.js";import{_ as y}from"./AdminLayout-BDbNDvIA.js";import{_}from"./ComponentCard.vue_vue_type_script_setup_true_lang-CxALZE3h.js";import{_ as v}from"./Form.vue_vue_type_script_setup_true_lang-Dj0hsM9h.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";const f={class:"space-y-5 sm:space-y-6"},h={key:1,class:"flex justify-center py-12"},b=e({__name:"CoachForm",setup(e){const b=t(),C=o(),g=a(()=>b.params.id&&"new"!==b.params.id),x=s(!1),w=s(!1),j=s({}),A=a(()=>[{key:"bio",label:"Bio",type:"textarea",required:!0,rows:4},{key:"specialties",label:"Specialties",type:"array",allowAdd:!0,allowRemove:!0,fields:[{key:"name",label:"Specialty",type:"text"}]},{key:"experience",label:"Experience",type:"text",required:!0}]),k=async e=>{w.value=!0;try{e.specialties&&Array.isArray(e.specialties)&&(e.specialties=e.specialties.map(e=>e.name)),g.value?await d.updateCoach(b.params.id,e):await d.createProfile(e),C.push("/coaches")}catch(a){console.error("Error saving coach:",a),alert("Failed to save coach profile")}finally{w.value=!1}};return i(async()=>{g.value&&await(async e=>{x.value=!0;try{const a=await d.getCoach(e),t=a.data.data||a.data;t.specialties&&Array.isArray(t.specialties)&&(t.specialties=t.specialties.map(e=>({name:e}))),j.value=t}catch(a){console.error("Error fetching coach:",a),C.push("/coaches")}finally{x.value=!1}})(b.params.id)}),(e,a)=>(n(),l(y,null,{default:r(()=>[c(m,{pageTitle:g.value?"Edit Coach":"Add Coach"},null,8,["pageTitle"]),p("div",f,[c(_,{title:g.value?"Edit Coach Profile":"New Coach Profile"},{default:r(()=>[x.value?(n(),u("div",h,[...a[0]||(a[0]=[p("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-500"},null,-1)])])):(n(),l(v,{key:0,fields:A.value,"initial-data":j.value,loading:w.value,"submit-button-text":g.value?"Update Profile":"Create Profile",onSubmit:k},null,8,["fields","initial-data","loading","submit-button-text"]))]),_:1},8,["title"])])]),_:1}))}});export{b as default};
