import{d as t,r as e,o as a,j as s,k as i,q as o,b as r,c as n,f as l,n as c,t as d,B as u,e as p}from"./index-BChQAjBg.js";import{N as m}from"./NotificationsAPI-EcAxaXdA.js";import{_ as y}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-CiMPynWi.js";import{_ as f}from"./AdminLayout-BDbNDvIA.js";import{_}from"./ComponentCard.vue_vue_type_script_setup_true_lang-CxALZE3h.js";import{D as b}from"./DataTable-D4TLCeTz.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./ErrorIcon-CRM2J8oG.js";const g={class:"space-y-5 sm:space-y-6"},x={key:0,class:"flex justify-center items-center py-12"},k=["onClick"],v=t({__name:"Notifications",setup(t){const v=u(),h=e("Notifications"),j=e([]),R=e(!1),w=[{key:"title",title:"Title",type:"text"},{key:"message",title:"Message",type:"text"},{key:"type",title:"Type",type:"text"},{key:"isRead",title:"Status",type:"custom"},{key:"createdAt",title:"Date",type:"text"},{key:"actions",title:"Actions",type:"custom"}],N=()=>{v.push("/notifications/broadcast")};return a(()=>{(async()=>{R.value=!0;try{const t=await m.getMyNotifications({});j.value=t.data.data||t.data}catch(t){console.error("Error fetching notifications:",t)}finally{R.value=!1}})()}),(t,e)=>(p(),s(f,null,{default:i(()=>[o(y,{pageTitle:h.value},null,8,["pageTitle"]),r("div",g,[o(_,{title:"Notifications"},{default:i(()=>[r("div",{class:"mb-4 flex justify-between items-center"},[e[0]||(e[0]=r("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white"},"My Notifications",-1)),r("button",{onClick:N,class:"px-4 py-2 bg-brand-500 text-white rounded-lg hover:bg-brand-600 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2"}," Send Broadcast ")]),R.value?(p(),n("div",x,[...e[1]||(e[1]=[r("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-500"},null,-1)])])):(p(),s(b,{key:1,columns:w,data:j.value,showActions:!1},{"column-isRead":i(({item:t})=>[r("span",{class:c(t.isRead?"text-green-600":"text-yellow-600 font-bold")},d(t.isRead?"Read":"Unread"),3)]),"column-actions":i(({item:t})=>[t.isRead?l("",!0):(p(),n("button",{key:0,onClick:e=>(async t=>{try{await m.markAsRead(t.id),t.isRead=!0}catch(e){console.error("Error marking notification as read:",e)}})(t),class:"text-sm text-brand-600 hover:text-brand-800"}," Mark as Read ",8,k))]),_:1},8,["data"]))]),_:1})])]),_:1}))}});export{v as default};
