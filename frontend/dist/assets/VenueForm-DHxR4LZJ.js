import{d as e,m as a,C as t,r,o as s,j as u,k as l,B as i,q as n,b as o,c as d,e as p}from"./index-BChQAjBg.js";import{V as m}from"./VenuesAPI-CGZ_RMsu.js";import{_ as c}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-CiMPynWi.js";import{_ as v}from"./AdminLayout-BDbNDvIA.js";import{_ as y}from"./ComponentCard.vue_vue_type_script_setup_true_lang-CxALZE3h.js";import{_}from"./Form.vue_vue_type_script_setup_true_lang-Dj0hsM9h.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";const b={class:"space-y-5 sm:space-y-6"},f={key:1,class:"flex justify-center py-12"},V=e({__name:"VenueForm",setup(e){const V=t(),g=i(),h=a(()=>V.params.id&&"new"!==V.params.id),j=r(!1),x=r(!1),k=r({}),w=a(()=>[{key:"name",label:"Name",type:"text",required:!0,placeholder:"Venue Name"},{key:"location",label:"Location",type:"text",required:!0,placeholder:"Address or Location"},{key:"pricePerHour",label:"Price Per Hour",type:"number",required:!0,min:0},{key:"description",label:"Description",type:"textarea",rows:3},{key:"amenities",label:"Amenities",type:"array",placeholder:"Add amenity"}]),A=async e=>{x.value=!0;try{h.value?await m.updateVenue(V.params.id,e):await m.createVenue(e),g.push("/venues")}catch(a){console.error("Error saving venue:",a),alert("Failed to save venue")}finally{x.value=!1}};return s(async()=>{h.value&&await(async e=>{j.value=!0;try{const a=await m.getVenue(e);k.value=a.data.data||a.data}catch(a){console.error("Error fetching venue:",a),g.push("/venues")}finally{j.value=!1}})(V.params.id)}),(e,a)=>(p(),u(v,null,{default:l(()=>[n(c,{pageTitle:h.value?"Edit Venue":"Add Venue"},null,8,["pageTitle"]),o("div",b,[n(y,{title:h.value?"Edit Venue":"New Venue"},{default:l(()=>[j.value?(p(),d("div",f,[...a[0]||(a[0]=[o("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-500"},null,-1)])])):(p(),u(_,{key:0,fields:w.value,"initial-data":k.value,loading:x.value,"submit-button-text":h.value?"Update Venue":"Create Venue",onSubmit:A},null,8,["fields","initial-data","loading","submit-button-text"]))]),_:1},8,["title"])])]),_:1}))}});export{V as default};
