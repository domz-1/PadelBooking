import{d as e,r as t,m as a,o as r,j as o,k as s,q as l,b as i,c as n,f as d,i as u,n as c,t as y,F as g,y as p,B as m,e as b}from"./index-BChQAjBg.js";import{S as f}from"./SettingsAPI-D3DdGTxy.js";import{_ as v}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-CiMPynWi.js";import{_ as x}from"./AdminLayout-BDbNDvIA.js";import{_}from"./ComponentCard.vue_vue_type_script_setup_true_lang-CxALZE3h.js";import{D as k}from"./DataTable-D4TLCeTz.js";import{_ as h}from"./Form.vue_vue_type_script_setup_true_lang-Dj0hsM9h.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./ErrorIcon-CRM2J8oG.js";const C={class:"space-y-5 sm:space-y-6"},w={class:"border-b border-gray-200 dark:border-gray-700"},j={class:"-mb-px flex space-x-8","aria-label":"Tabs"},S=["onClick"],q={key:0},D={key:1,class:"flex justify-center py-12"},A={key:1},E={class:"flex items-center gap-2"},B=e({__name:"Settings",setup(e){const B=m(),T=t("general"),F=[{name:"general",label:"General Settings"},{name:"categories",label:"Categories"}],I=t(!1),L=t(!1),N=t({}),z=a(()=>[{key:"businessName",label:"Business Name",type:"text",required:!0},{key:"region",label:"Region",type:"text",required:!0},{key:"city",label:"City",type:"text",required:!0},{key:"timezone",label:"Timezone",type:"text",required:!0},{key:"currency",label:"Currency",type:"text",required:!0},{key:"minBookingDuration",label:"Min Booking Duration (mins)",type:"number",required:!0},{key:"themeColor",label:"Theme Color",type:"text"},{key:"logo",label:"Logo URL",type:"text"}]),G=t([]),M=[{key:"id",title:"ID",type:"text"},{key:"name",title:"Name",type:"text"},{key:"color",title:"Color",type:"custom"},{key:"description",title:"Description",type:"text"}],P=async e=>{L.value=!0;try{await f.updateConfig(e),alert("Settings updated successfully")}catch(t){console.error("Error updating settings:",t),alert("Failed to update settings")}finally{L.value=!1}},R=async()=>{try{const e=await f.getCategories({});G.value=e.data.data||e.data}catch(e){console.error("Error fetching categories:",e)}},U=()=>{B.push("/settings/categories/add")},$=e=>{B.push(`/settings/categories/edit/${e.id}`)},H=async e=>{if(confirm("Are you sure you want to delete this category?"))try{await f.deleteCategory(e.id),R()}catch(t){console.error("Error deleting category:",t),alert("Failed to delete category")}};return r(()=>{(async()=>{I.value=!0;try{const e=await f.getConfig();N.value=e.data.data||e.data}catch(e){console.error("Error fetching config:",e)}finally{I.value=!1}})(),R()}),(e,t)=>(b(),o(x,null,{default:s(()=>[l(v,{pageTitle:"Settings"}),i("div",C,[i("div",w,[i("nav",j,[(b(),n(g,null,u(F,e=>i("button",{key:e.name,onClick:t=>T.value=e.name,class:c([T.value===e.name?"border-brand-500 text-brand-600 dark:text-brand-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])},y(e.label),11,S)),64))])]),"general"===T.value?(b(),n("div",q,[l(_,{title:"General Configuration"},{default:s(()=>[I.value?(b(),n("div",D,[...t[0]||(t[0]=[i("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-500"},null,-1)])])):(b(),o(h,{key:0,fields:z.value,"initial-data":N.value,loading:L.value,"submit-button-text":"Save Changes",onSubmit:P},null,8,["fields","initial-data","loading"]))]),_:1})])):d("",!0),"categories"===T.value?(b(),n("div",A,[l(_,{title:"Categories Management"},{default:s(()=>[i("div",{class:"mb-4 flex justify-between items-center"},[t[1]||(t[1]=i("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white"},"All Categories",-1)),i("button",{onClick:U,class:"px-4 py-2 bg-brand-500 text-white rounded-lg hover:bg-brand-600 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2"}," Add Category ")]),l(k,{columns:M,data:G.value,showActions:!0,onEdit:$,onDelete:H},{"column-color":s(({item:e})=>[i("div",E,[i("div",{class:"w-6 h-6 rounded border border-gray-200",style:p({backgroundColor:e.color})},null,4),i("span",null,y(e.color),1)])]),_:1},8,["data"])]),_:1})])):d("",!0)])]),_:1}))}});export{B as default};
