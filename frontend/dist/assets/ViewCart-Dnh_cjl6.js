import{d as t,C as e,r as a,o as r,j as l,k as s,q as d,c as i,b as o,f as u,t as n,F as c,i as x,s as m,B as p,e as g}from"./index-BChQAjBg.js";import{_ as y}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-CiMPynWi.js";import{_ as f}from"./AdminLayout-BDbNDvIA.js";import{_ as v}from"./ComponentCard.vue_vue_type_script_setup_true_lang-CxALZE3h.js";import{L as b}from"./LazyImage-BMawgtWq.js";import{C as k}from"./CartsAPI-2yBGA81K.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";const h={key:0,class:"flex items-center justify-center py-12"},_={key:1,class:"space-y-6"},C={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},w={class:"block text-sm bg-gray-100 dark:bg-gray-800 rounded px-3 py-2"},I={class:"text-lg font-semibold text-gray-900 dark:text-white"},P={key:0,class:"text-sm text-green-600 dark:text-green-400"},j={class:"text-gray-900 dark:text-white"},D={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},A={class:"text-gray-900 dark:text-white"},B={class:"text-gray-900 dark:text-white"},K={class:"text-gray-900 dark:text-white"},W={class:"overflow-x-auto"},q={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},F={class:"divide-y divide-gray-200 dark:divide-gray-700"},L={class:"px-4 py-3"},T={class:"px-4 py-3 text-sm text-gray-900 dark:text-white"},$={class:"px-4 py-3 text-sm text-gray-900 dark:text-white"},E={class:"px-4 py-3 text-sm text-gray-900 dark:text-white"},S={class:"px-4 py-3 text-sm font-semibold text-gray-900 dark:text-white"},V={class:"flex gap-4"},z={key:2,class:"text-center py-12"},N=t({__name:"ViewCart",setup(t){const N=e();p();const Q=N.params.id,R=a("View Cart"),U=a(null),G=a(!1);return r(async()=>{G.value=!0;try{const{data:t}=await k.getCartById(Q);U.value=null==t?void 0:t.data}catch(t){console.error("Failed to fetch cart:",t)}finally{G.value=!1}}),(t,e)=>(g(),l(f,null,{default:s(()=>[d(y,{pageTitle:R.value},null,8,["pageTitle"]),G.value?(g(),i("div",h,[...e[2]||(e[2]=[o("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-500"},null,-1)])])):U.value?(g(),i("div",_,[d(v,{title:"Cart Details"},{default:s(()=>{var t;return[o("div",C,[o("div",null,[e[3]||(e[3]=o("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Cart ID",-1)),o("code",w,n(U.value._id),1)]),o("div",null,[e[4]||(e[4]=o("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Total Price",-1)),o("p",I,n(U.value.totalPrice)+" KWD",1),U.value.totalPriceAfterDiscount?(g(),i("p",P," After discount: "+n(U.value.totalPriceAfterDiscount)+" KWD ("+n(U.value.discount)+"% off) ",1)):u("",!0)]),e[6]||(e[6]=o("div",null,[o("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Cart Status"),o("span",{class:"inline-block rounded-full px-3 py-1 text-sm font-medium bg-blue-50 text-blue-700 dark:bg-blue-500/15 dark:text-blue-500"}," Ready for Processing ")],-1)),o("div",null,[e[5]||(e[5]=o("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Items Count",-1)),o("p",j,n((null==(t=U.value.cartItem)?void 0:t.length)||0)+" items",1)])])]}),_:1}),U.value.userId?(g(),l(v,{key:0,title:"Customer Information"},{default:s(()=>[o("div",D,[o("div",null,[e[7]||(e[7]=o("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Name",-1)),o("p",A,n(U.value.userId.name||"—"),1)]),o("div",null,[e[8]||(e[8]=o("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Email",-1)),o("p",B,n(U.value.userId.email||"—"),1)]),o("div",null,[e[9]||(e[9]=o("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Phone",-1)),o("p",K,n(U.value.userId.phone||"—"),1)])])]),_:1})):u("",!0),d(v,{title:"Cart Items"},{default:s(()=>[o("div",W,[o("table",q,[e[10]||(e[10]=o("thead",null,[o("tr",null,[o("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Image"),o("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Product"),o("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Quantity"),o("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Price"),o("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Subtotal")])],-1)),o("tbody",F,[(g(!0),i(c,null,x(U.value.cartItem,(t,e)=>{var a,r,s;return g(),i("tr",{key:e},[o("td",L,[(null==(a=t.productId)?void 0:a.imgCover)?(g(),l(b,{key:0,"image-id":t.productId.imgCover,width:"50px",height:"50px","image-class":"w-12 h-12 object-cover rounded",placeholder:"/placeholder-product.png"},null,8,["image-id"])):u("",!0)]),o("td",T,n((null==(s=null==(r=t.productId)?void 0:r.title)?void 0:s.en)||"Unknown Product"),1),o("td",$,n(t.quantity),1),o("td",E,n(t.price)+" KWD",1),o("td",S,n((t.quantity*t.price).toFixed(2))+" KWD ",1)])}),128))])])])]),_:1}),o("div",V,[o("button",{onClick:e[0]||(e[0]=e=>t.$router.push(`/carts/edit/${m(Q)}`)),class:"px-6 py-2.5 bg-brand-500 text-white rounded-lg hover:bg-brand-600 focus:outline-none focus:ring-2 focus:ring-brand-500 transition-colors duration-200 font-medium"}," Edit Cart "),o("button",{onClick:e[1]||(e[1]=e=>t.$router.push("/carts")),class:"px-6 py-2.5 bg-gray-500 text-white rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors duration-200 font-medium"}," Back to Carts ")])])):(g(),i("div",z,[...e[11]||(e[11]=[o("p",{class:"text-gray-500 dark:text-gray-400"},"Cart not found",-1)])]))]),_:1}))}});export{N as default};
