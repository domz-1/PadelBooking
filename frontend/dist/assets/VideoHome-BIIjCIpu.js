import{_ as e}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-CiMPynWi.js";import{_ as t}from"./AdminLayout-BDbNDvIA.js";import{_ as a}from"./ComponentCard.vue_vue_type_script_setup_true_lang-CxALZE3h.js";import{a as o,r as s,c as l,e as i,b as r,f as d,t as n,n as c,l as u,G as g,w as p,A as v,I as m,o as y,j as x,k as f,q as b}from"./index-BChQAjBg.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";const h=async(e,t,a)=>{const s=new FormData;return s.append("video",t),a&&s.append("description",a),o.post(`/video-home/upload/${e}`,s,{headers:{"Content-Type":"multipart/form-data"}})},k=async(e,t,a)=>{const s={};return void 0!==t&&(s.description=t),void 0!==a&&(s.isActive=a),o.put(`/video-home/info/${e}`,s)},w=async e=>o.delete(`/video-home/${e}`),D=async()=>{var e,t;console.log("VideoHomeAPI: Making request to /video-home/home-videos"),console.log("API base URL:",o.defaults.baseURL);try{const e=await o.get("/video-home/home-videos",{timeout:1e4});return console.log("VideoHomeAPI: Success response status:",e.status),console.log("VideoHomeAPI: Success response data:",e.data),e}catch(a){throw console.error("VideoHomeAPI: Error response:",a),console.error("VideoHomeAPI: Error details:",{message:null==a?void 0:a.message,status:null==(e=null==a?void 0:a.response)?void 0:e.status,data:null==(t=null==a?void 0:a.response)?void 0:t.data}),a}},M=e=>(console.log("VideoHomeAPI: Making request to /video-home/home-videos"),console.log("API base URL:",o.defaults.baseURL),console.log("Section name:",e),console.log("Video URL:",`${o.defaults.baseURL}video-home/${e}`),`${o.defaults.baseURL}/video-home/${e}`),V={class:"space-y-6"},A={key:0,class:"space-y-4"},S={class:"text-center"},_={class:"max-w-2xl mx-auto mb-4"},U=["src"],I=["src","alt"],$={class:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg mb-4 text-left"},N={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm"},B={class:"text-gray-600 dark:text-gray-400"},C={class:"text-gray-600 dark:text-gray-400"},H={class:"text-gray-600 dark:text-gray-400"},P={class:"text-gray-600 dark:text-gray-400 capitalize"},z={key:0},F={class:"text-gray-600 dark:text-gray-400"},j={key:1},E={class:"text-gray-600 dark:text-gray-400"},L={class:"text-gray-600 dark:text-gray-400"},T={key:0,class:"mt-4"},R={class:"text-gray-600 dark:text-gray-400 mt-1"},G={class:"flex justify-center gap-2"},q=["disabled"],K={key:0},O={key:1,class:"flex items-center gap-2"},W={key:1,class:"text-center py-8 text-gray-500"},J={class:"border-t border-gray-200 dark:border-gray-700 pt-4"},Y={class:"text-md font-medium text-gray-800 dark:text-white mb-4"},Q={key:0,class:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-4"},X={class:"flex items-center"},Z={class:"text-sm text-yellow-700 dark:text-yellow-300 mt-1"},ee=["disabled"],te=["disabled"],ae={class:"text-xs text-gray-500 mt-1"},oe={class:"flex gap-2"},se=["disabled"],le={key:0},ie={key:1,class:"flex items-center gap-2"},re={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},de={class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4"},ne={class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},ce={class:"space-y-4"},ue={class:"text-xs text-gray-500 mt-1"},ge={class:"flex items-center"},pe={class:"flex justify-end gap-2 mt-6"},ve={__name:"VideoManagementSection",props:{sectionName:{type:String,required:!0,validator:e=>["hero","second"].includes(e)},videoData:{type:Object,default:null},isUploading:{type:Boolean,default:!1},isDeleting:{type:Boolean,default:!1}},emits:["upload","delete","update-info"],setup(e,{emit:t}){const a=e,o=t,y=s(null),x=s(!1),f=s({file:null,description:""}),b=s({description:"",isActive:!0}),h=()=>M(a.sectionName),k=e=>{const t=e.target.files[0];t&&(f.value.file=t)},w=()=>{f.value.file&&(o("upload",{sectionName:a.sectionName,file:f.value.file,description:f.value.description}),ye())},D=()=>{o("delete",a.sectionName)},ve=()=>{o("update-info",{sectionName:a.sectionName,description:b.value.description,isActive:b.value.isActive}),x.value=!1},me=()=>{a.videoData&&(b.value={description:a.videoData.description||"",isActive:a.videoData.isActive}),x.value=!0},ye=()=>{f.value={file:null,description:""},y.value&&(y.value.value="")},xe=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},fe=e=>{if(!e||0===e)return"Unknown";const t=Math.floor(e/3600),a=Math.floor(e%3600/60),o=Math.floor(e%60);return t>0?`${t}:${a.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`:`${a}:${o.toString().padStart(2,"0")}`};return(t,a)=>{var o,s;return i(),l("div",V,[e.videoData?(i(),l("div",A,[r("div",S,[r("div",_,["video"===e.videoData.mediaType?(i(),l("video",{key:0,src:h(),controls:"",class:"w-full max-h-96 rounded-lg shadow-sm bg-black",preload:"metadata"}," Your browser does not support the video tag. ",8,U)):(i(),l("img",{key:1,src:h(),alt:e.videoData.description||"Home media",class:"w-full max-h-96 rounded-lg shadow-sm object-cover"},null,8,I))]),r("div",$,[r("div",N,[r("div",null,[a[4]||(a[4]=r("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"File Name:",-1)),r("p",B,n(e.videoData.originalName),1)]),r("div",null,[a[5]||(a[5]=r("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"Size:",-1)),r("p",C,n(xe(e.videoData.size)),1)]),r("div",null,[a[6]||(a[6]=r("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"Format:",-1)),r("p",H,n(e.videoData.mimetype),1)]),r("div",null,[a[7]||(a[7]=r("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"Type:",-1)),r("p",P,n(e.videoData.mediaType),1)]),"video"===e.videoData.mediaType&&e.videoData.resolution?(i(),l("div",z,[a[8]||(a[8]=r("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"Resolution:",-1)),r("p",F,n(e.videoData.resolution.width||0)+"x"+n(e.videoData.resolution.height||0),1)])):d("",!0),"video"===e.videoData.mediaType?(i(),l("div",j,[a[9]||(a[9]=r("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"Duration:",-1)),r("p",E,n(fe(e.videoData.duration)),1)])):d("",!0),r("div",null,[a[10]||(a[10]=r("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"Status:",-1)),r("p",L,[r("span",{class:c(e.videoData.isActive?"text-green-600":"text-red-600")},n(e.videoData.isActive?"Active":"Inactive"),3)])])]),e.videoData.description?(i(),l("div",T,[a[11]||(a[11]=r("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"Description:",-1)),r("p",R,n(e.videoData.description),1)])):d("",!0)]),r("div",G,[r("button",{onClick:me,class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200 text-sm font-medium"}," Edit Info "),r("button",{onClick:D,disabled:e.isDeleting,class:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 text-sm font-medium"},[e.isDeleting?(i(),l("span",O,[...a[12]||(a[12]=[r("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),u(" Deleting... ",-1)])])):(i(),l("span",K,"Delete "+n(e.videoData.mediaType),1))],8,q)])])])):(i(),l("div",W,[a[13]||(a[13]=r("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)),r("p",null,"No "+n(e.sectionName)+" media uploaded yet",1)])),r("div",J,[r("h4",Y," Upload New "+n("hero"===e.sectionName?"Hero":"Second")+" Media ",1),e.videoData?(i(),l("div",Q,[r("div",X,[a[15]||(a[15]=r("svg",{class:"h-5 w-5 text-yellow-400 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},[r("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),r("div",null,[a[14]||(a[14]=r("h5",{class:"text-sm font-medium text-yellow-800 dark:text-yellow-200"},"Upload Disabled",-1)),r("p",Z," Please delete the existing "+n(e.videoData.mediaType)+" before uploading a new one. ",1)])])])):d("",!0),r("form",{onSubmit:g(w,["prevent"]),class:c(["space-y-4",{"opacity-50 pointer-events-none":e.videoData}])},[r("div",null,[a[16]||(a[16]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Select Media File ",-1)),r("input",{ref_key:"fileInput",ref:y,type:"file",accept:"video/*,image/*",onChange:k,disabled:e.videoData,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed",required:""},null,40,ee),a[17]||(a[17]=r("p",{class:"text-xs text-gray-500 mt-1"}," Supported formats: Videos (MP4, AVI, MOV, WebM, MKV) or Images (JPEG, PNG, GIF, WebP). Max size: 500MB. ",-1))]),r("div",null,[a[18]||(a[18]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Description (Optional) ",-1)),p(r("textarea",{"onUpdate:modelValue":a[0]||(a[0]=e=>f.value.description=e),rows:"3",maxlength:"500",disabled:e.videoData,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"Enter media description..."},null,8,te),[[v,f.value.description]]),r("p",ae,n((null==(o=f.value.description)?void 0:o.length)||0)+"/500 characters",1)]),r("div",oe,[r("button",{type:"submit",disabled:!f.value.file||e.isUploading||e.videoData,class:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 text-sm font-medium"},[e.isUploading?(i(),l("span",ie,[...a[19]||(a[19]=[r("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),u(" Uploading... ",-1)])])):(i(),l("span",le,"Upload Media"))],8,se),r("button",{type:"button",onClick:ye,class:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors duration-200 text-sm font-medium"}," Reset ")])],34)]),x.value?(i(),l("div",re,[r("div",de,[r("h3",ne," Edit "+n("hero"===e.sectionName?"Hero":"Second")+" Media Information ",1),r("form",{onSubmit:g(ve,["prevent"])},[r("div",ce,[r("div",null,[a[20]||(a[20]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Description ",-1)),p(r("textarea",{"onUpdate:modelValue":a[1]||(a[1]=e=>b.value.description=e),rows:"3",maxlength:"500",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter media description..."},null,512),[[v,b.value.description]]),r("p",ue,n((null==(s=b.value.description)?void 0:s.length)||0)+"/500 characters",1)]),r("div",ge,[p(r("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>b.value.isActive=e),type:"checkbox",id:"isActive",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[m,b.value.isActive]]),a[21]||(a[21]=r("label",{for:"isActive",class:"ml-2 block text-sm text-gray-700 dark:text-gray-300"}," Media is active ",-1))])]),r("div",pe,[r("button",{type:"button",onClick:a[3]||(a[3]=e=>x.value=!1),class:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors duration-200"}," Cancel "),a[22]||(a[22]=r("button",{type:"submit",class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200"}," Update ",-1))])],32)])])):d("",!0)])}}},me={key:0,class:"flex justify-center items-center py-12"},ye={key:1,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6"},xe={class:"text-sm mt-1"},fe={key:2,class:"space-y-5 sm:space-y-6"},be={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},he={class:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg"},ke={class:"text-sm text-gray-600 dark:text-gray-400"},we={key:0,class:"text-xs text-gray-500 mt-1"},De={class:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg"},Me={class:"text-sm text-gray-600 dark:text-gray-400"},Ve={key:0,class:"text-xs text-gray-500 mt-1"},Ae={class:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg"},Se=["disabled"],_e={__name:"VideoHome",setup(o){const c=s("Home Video Management"),g=s(!1),p=s(null),v=s(null),m=s(null),M=s(null),V=s(null),A=async()=>{var e,t;g.value=!0,p.value=null;try{console.log("Loading videos...");const e=await D();console.log("Videos loaded successfully:",e.data);const t=e.data.data;v.value=t.hero,m.value=t.second}catch(a){console.error("Error loading videos:",a),p.value=(null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.message)||a.message||"Failed to load videos"}finally{g.value=!1}},S=async({sectionName:e,file:t,description:a})=>{var o,s;M.value=e;try{console.log(`Uploading ${e} video...`),await h(e,t,a),console.log(`${e} video uploaded successfully`),await A()}catch(l){console.error(`Error uploading ${e} video:`,l),p.value=(null==(s=null==(o=l.response)?void 0:o.data)?void 0:s.message)||l.message||"Failed to upload video"}finally{M.value=null}},_=async e=>{var t,a;if(confirm(`Are you sure you want to delete the ${e} video?`)){V.value=e;try{console.log(`Deleting ${e} video...`),await w(e),console.log(`${e} video deleted successfully`),await A()}catch(o){console.error(`Error deleting ${e} video:`,o),p.value=(null==(a=null==(t=o.response)?void 0:t.data)?void 0:a.message)||o.message||"Failed to delete video"}finally{V.value=null}}},U=async({sectionName:e,description:t,isActive:a})=>{var o,s;try{console.log(`Updating ${e} video info...`),await k(e,t,a),console.log(`${e} video info updated successfully`),await A()}catch(l){console.error(`Error updating ${e} video info:`,l),p.value=(null==(s=null==(o=l.response)?void 0:o.data)?void 0:s.message)||l.message||"Failed to update video info"}},I=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]};return y(()=>{console.log("VideoHome component mounted"),A()}),(o,s)=>(i(),x(t,null,{default:f(()=>[b(e,{pageTitle:c.value},null,8,["pageTitle"]),g.value?(i(),l("div",me,[...s[0]||(s[0]=[r("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"},null,-1),r("span",{class:"ml-3 text-gray-600"},"Loading videos...",-1)])])):p.value?(i(),l("div",ye,[s[1]||(s[1]=r("h3",{class:"font-medium"},"Error loading videos",-1)),r("p",xe,n(p.value),1),r("button",{onClick:A,class:"mt-2 px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700"}," Retry ")])):(i(),l("div",fe,[b(a,{title:"Hero Section Video"},{default:f(()=>[b(ve,{"section-name":"hero","video-data":v.value,"is-uploading":"hero"===M.value,"is-deleting":"hero"===V.value,onUpload:S,onDelete:_,onUpdateInfo:U},null,8,["video-data","is-uploading","is-deleting"])]),_:1}),b(a,{title:"Second Section Video"},{default:f(()=>[b(ve,{"section-name":"second","video-data":m.value,"is-uploading":"second"===M.value,"is-deleting":"second"===V.value,onUpload:S,onDelete:_,onUpdateInfo:U},null,8,["video-data","is-uploading","is-deleting"])]),_:1}),b(a,{title:"Video Management Information"},{default:f(()=>[r("div",be,[r("div",he,[s[2]||(s[2]=r("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Hero Section",-1)),r("p",ke,n(v.value?"Video uploaded":"No video uploaded"),1),v.value?(i(),l("p",we,n(v.value.mediaType)+" • "+n(I(v.value.size)),1)):d("",!0)]),r("div",De,[s[3]||(s[3]=r("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Second Section",-1)),r("p",Me,n(m.value?"Video uploaded":"No video uploaded"),1),m.value?(i(),l("p",Ve,n(m.value.mediaType)+" • "+n(I(m.value.size)),1)):d("",!0)]),s[5]||(s[5]=r("div",{class:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg"},[r("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Format Support"),r("p",{class:"text-sm text-gray-600 dark:text-gray-400"},[u(" Videos: MP4, AVI, MOV, WebM, MKV"),r("br"),u(" Images: JPEG, PNG, GIF, WebP (Max 500MB) ")])],-1)),r("div",Ae,[s[4]||(s[4]=r("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Actions",-1)),r("button",{onClick:A,disabled:g.value,class:"px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600 disabled:opacity-50"},n(g.value?"Loading...":"Refresh"),9,Se)])])]),_:1})]))]),_:1}))}};export{_e as default};
