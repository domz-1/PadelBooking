import{d as e,m as a,C as t,r as l,o as r,j as s,k as i,a as u,B as n,q as d,b as o,c,e as p}from"./index-BChQAjBg.js";import{M as m}from"./MatchesAPI-BLuDWH57.js";import{_ as v}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-CiMPynWi.js";import{_ as y}from"./AdminLayout-BDbNDvIA.js";import{_ as b}from"./ComponentCard.vue_vue_type_script_setup_true_lang-CxALZE3h.js";import{_}from"./Form.vue_vue_type_script_setup_true_lang-Dj0hsM9h.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";const h={class:"space-y-5 sm:space-y-6"},f={key:1,class:"flex justify-center py-12"},g=e({__name:"MatchForm",setup(e){const g=t(),M=n(),k=a(()=>g.params.id&&"new"!==g.params.id),j=l(!1),q=l(!1),w=l({}),x=l([]),C=a(()=>[{key:"venueId",label:"Venue",type:"select",required:!0,options:x.value.map(e=>({label:e.name,value:e.id})),placeholder:"Select Venue"},{key:"date",label:"Date",type:"date",required:!0},{key:"startTime",label:"Start Time",type:"time",required:!0},{key:"endTime",label:"End Time",type:"time",required:!0},{key:"level",label:"Level",type:"select",options:[{label:"Beginner",value:"Beginner"},{label:"Intermediate",value:"Intermediate"},{label:"Advanced",value:"Advanced"},{label:"Pro",value:"Pro"}],required:!0},{key:"type",label:"Type",type:"select",options:[{label:"Friendly",value:"friendly"},{label:"Competitive",value:"competitive"}],required:!0},{key:"maxPlayers",label:"Max Players",type:"number",required:!0,min:2},{key:"status",label:"Status",type:"select",options:[{label:"Open",value:"open"},{label:"Full",value:"full"},{label:"Cancelled",value:"cancelled"},{label:"Completed",value:"completed"}],required:!0}]),T=async e=>{q.value=!0;try{k.value?await m.updateMatch(g.params.id,e):await m.createMatch(e),M.push("/matches")}catch(a){console.error("Error saving match:",a),alert("Failed to save match")}finally{q.value=!1}};return r(async()=>{await(async()=>{try{const e=await u.get("/venues");x.value=e.data.data||e.data}catch(e){console.error("Error fetching venues:",e)}})(),k.value&&await(async e=>{j.value=!0;try{const a=await m.getMatch(e);w.value=a.data.data||a.data}catch(a){console.error("Error fetching match:",a),M.push("/matches")}finally{j.value=!1}})(g.params.id)}),(e,a)=>(p(),s(y,null,{default:i(()=>[d(v,{pageTitle:k.value?"Edit Match":"Create Match"},null,8,["pageTitle"]),o("div",h,[d(b,{title:k.value?"Edit Match Details":"New Match"},{default:i(()=>[j.value?(p(),c("div",f,[...a[0]||(a[0]=[o("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-500"},null,-1)])])):(p(),s(_,{key:0,fields:C.value,"initial-data":w.value,loading:q.value,"submit-button-text":k.value?"Update Match":"Create Match",onSubmit:T},null,8,["fields","initial-data","loading","submit-button-text"]))]),_:1},8,["title"])])]),_:1}))}});export{g as default};
