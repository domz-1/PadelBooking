import{d as e,m as a,C as s,r as t,o,j as r,k as l,B as i,q as n,b as p,c as u,e as d}from"./index-BChQAjBg.js";import{S as m}from"./SponsorsAPI-DnMhFMQQ.js";import{_ as c}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-CiMPynWi.js";import{_ as v}from"./AdminLayout-BDbNDvIA.js";import{_}from"./ComponentCard.vue_vue_type_script_setup_true_lang-CxALZE3h.js";import{_ as y}from"./Form.vue_vue_type_script_setup_true_lang-Dj0hsM9h.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";const f={class:"space-y-5 sm:space-y-6"},b={key:1,class:"flex justify-center py-12"},g=e({__name:"SponsorForm",setup(e){const g=s(),S=i(),h=a(()=>g.params.id&&"new"!==g.params.id),k=t(!1),j=t(!1),x=t({}),w=a(()=>[{key:"name",label:"Name",type:"text",required:!0,placeholder:"Sponsor Name"},{key:"link",label:"Website Link",type:"text",required:!0,placeholder:"https://example.com"},{key:"image",label:"Logo Image",type:"file",required:!h.value},{key:"isActive",label:"Active",type:"checkbox"}]),A=async e=>{j.value=!0;try{const a=new FormData;Object.keys(e).forEach(s=>{null!==e[s]&&void 0!==e[s]&&a.append(s,e[s])}),h.value?await m.updateSponsor(g.params.id,a):await m.createSponsor(a),S.push("/sponsors")}catch(a){console.error("Error saving sponsor:",a),alert("Failed to save sponsor")}finally{j.value=!1}};return o(async()=>{h.value&&await(async e=>{k.value=!0;try{const a=await m.getSponsor(e);x.value=a.data.data||a.data}catch(a){console.error("Error fetching sponsor:",a),S.push("/sponsors")}finally{k.value=!1}})(g.params.id)}),(e,a)=>(d(),r(v,null,{default:l(()=>[n(c,{pageTitle:h.value?"Edit Sponsor":"Add Sponsor"},null,8,["pageTitle"]),p("div",f,[n(_,{title:h.value?"Edit Sponsor":"New Sponsor"},{default:l(()=>[k.value?(d(),u("div",b,[...a[0]||(a[0]=[p("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-500"},null,-1)])])):(d(),r(y,{key:0,fields:w.value,"initial-data":x.value,loading:j.value,"submit-button-text":h.value?"Update Sponsor":"Create Sponsor",onSubmit:A},null,8,["fields","initial-data","loading","submit-button-text"]))]),_:1},8,["title"])])]),_:1}))}});export{g as default};
