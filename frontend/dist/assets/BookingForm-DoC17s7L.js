import{d as e,m as a,C as t,r as l,o as i,j as o,k as r,a as n,B as s,q as u,b as d,c as p,e as c}from"./index-BChQAjBg.js";import{B as m}from"./BookingsAPI-BPIiesDV.js";import{_ as v}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-CiMPynWi.js";import{_ as y}from"./AdminLayout-BDbNDvIA.js";import{_ as g}from"./ComponentCard.vue_vue_type_script_setup_true_lang-CxALZE3h.js";import{_ as b}from"./Form.vue_vue_type_script_setup_true_lang-Dj0hsM9h.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";const _={class:"space-y-5 sm:space-y-6"},k={key:1,class:"flex justify-center py-12"},f=e({__name:"BookingForm",setup(e){const f=t(),h=s(),B=a(()=>f.params.id&&"new"!==f.params.id),w=l(!1),j=l(!1),q=l({}),T=l([]);l([]);const C=a(()=>[{key:"venueId",label:"Venue",type:"select",required:!0,options:T.value.map(e=>({label:e.name,value:e.id})),placeholder:"Select Venue"},{key:"date",label:"Date",type:"date",required:!0},{key:"startTime",label:"Start Time",type:"time",required:!0},{key:"endTime",label:"End Time",type:"time",required:!0},{key:"totalPrice",label:"Total Price",type:"number",required:!0,min:0},{key:"status",label:"Status",type:"select",options:[{label:"Pending",value:"pending"},{label:"Confirmed",value:"confirmed"},{label:"Cancelled",value:"cancelled"},{label:"Pending Coach",value:"pending-coach"},{label:"No Show",value:"no-show"}],required:!0},{key:"type",label:"Type",type:"select",options:[{label:"Standard",value:"standard"},{label:"Academy",value:"academy"}],required:!0}]),x=async e=>{j.value=!0;try{B.value?await m.updateBooking(f.params.id,e):await m.createBooking(e),h.push("/bookings")}catch(a){console.error("Error saving booking:",a),alert("Failed to save booking")}finally{j.value=!1}};return i(async()=>{await(async()=>{try{const e=await n.get("/venues");T.value=e.data.data||e.data}catch(e){console.error("Error fetching venues:",e)}})(),B.value&&await(async e=>{w.value=!0;try{const a=await m.getBooking(e);q.value=a.data.data||a.data}catch(a){console.error("Error fetching booking:",a),h.push("/bookings")}finally{w.value=!1}})(f.params.id)}),(e,a)=>(c(),o(y,null,{default:r(()=>[u(v,{pageTitle:B.value?"Edit Booking":"Add Booking"},null,8,["pageTitle"]),d("div",_,[u(g,{title:B.value?"Edit Booking Details":"New Booking"},{default:r(()=>[w.value?(c(),p("div",k,[...a[0]||(a[0]=[d("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-500"},null,-1)])])):(c(),o(b,{key:0,fields:C.value,"initial-data":q.value,loading:j.value,"submit-button-text":B.value?"Update Booking":"Create Booking",onSubmit:x},null,8,["fields","initial-data","loading","submit-button-text"]))]),_:1},8,["title"])])]),_:1}))}});export{f as default};
