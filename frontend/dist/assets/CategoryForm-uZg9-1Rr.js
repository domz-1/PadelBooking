import{d as e,m as a,C as t,r,o as s,j as l,k as o,B as i,q as u,b as n,c as p,e as d}from"./index-BChQAjBg.js";import{S as y}from"./SettingsAPI-D3DdGTxy.js";import{_ as c}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-CiMPynWi.js";import{_ as m}from"./AdminLayout-BDbNDvIA.js";import{_ as g}from"./ComponentCard.vue_vue_type_script_setup_true_lang-CxALZE3h.js";import{_}from"./Form.vue_vue_type_script_setup_true_lang-Dj0hsM9h.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";const v={class:"space-y-5 sm:space-y-6"},f={key:1,class:"flex justify-center py-12"},C=e({__name:"CategoryForm",setup(e){const C=t(),b=i(),h=a(()=>C.params.id&&"new"!==C.params.id),j=r(!1),x=r(!1),w=r({}),k=a(()=>[{key:"name",label:"Name",type:"text",required:!0,placeholder:"Category Name"},{key:"color",label:"Color",type:"text",placeholder:"#000000"},{key:"description",label:"Description",type:"textarea",rows:3}]),E=async e=>{x.value=!0;try{h.value?await y.updateCategory(C.params.id,e):await y.createCategory(e),b.push("/settings")}catch(a){console.error("Error saving category:",a),alert("Failed to save category")}finally{x.value=!1}};return s(async()=>{h.value&&await(async e=>{j.value=!0;try{const a=await y.getCategories({}),t=(a.data.data||a.data).find(a=>a.id.toString()===e);t?w.value=t:b.push("/settings")}catch(a){console.error("Error fetching category:",a),b.push("/settings")}finally{j.value=!1}})(C.params.id)}),(e,a)=>(d(),l(m,null,{default:o(()=>[u(c,{pageTitle:h.value?"Edit Category":"Add Category"},null,8,["pageTitle"]),n("div",v,[u(g,{title:h.value?"Edit Category":"New Category"},{default:o(()=>[j.value?(d(),p("div",f,[...a[0]||(a[0]=[n("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-500"},null,-1)])])):(d(),l(_,{key:0,fields:k.value,"initial-data":w.value,loading:x.value,"submit-button-text":h.value?"Update Category":"Create Category",onSubmit:E},null,8,["fields","initial-data","loading","submit-button-text"]))]),_:1},8,["title"])])]),_:1}))}});export{C as default};
